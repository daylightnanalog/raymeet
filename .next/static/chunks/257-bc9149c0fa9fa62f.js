(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[257],{1909:function(e,t){"use strict";t.h=void 0,t.h=["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","\u0915\u0949\u092e","\u30bb\u30fc\u30eb","\u4f5b\u5c71","\u0cad\u0cbe\u0cb0\u0ca4","\u6148\u5584","\u96c6\u56e2","\u5728\u7ebf","\ud55c\uad6d","\u0b2d\u0b3e\u0b30\u0b24","\u70b9\u770b","\u0e04\u0e2d\u0e21","\u09ad\u09be\u09f0\u09a4","\u09ad\u09be\u09b0\u09a4","\u516b\u5366","\u05d9\u05e9\u05e8\u05d0\u05dc","\u0645\u0648\u0642\u0639","\u09ac\u09be\u0982\u09b2\u09be","\u516c\u76ca","\u516c\u53f8","\u9999\u683c\u91cc\u62c9","\u7f51\u7ad9","\u79fb\u52a8","\u6211\u7231\u4f60","\u043c\u043e\u0441\u043a\u0432\u0430","\u049b\u0430\u0437","\u043a\u0430\u0442\u043e\u043b\u0438\u043a","\u043e\u043d\u043b\u0430\u0439\u043d","\u0441\u0430\u0439\u0442","\u8054\u901a","\u0441\u0440\u0431","\u0431\u0433","\u0431\u0435\u043b","\u05e7\u05d5\u05dd","\u65f6\u5c1a","\u5fae\u535a","\u6de1\u9a6c\u9521","\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3","\u043e\u0440\u0433","\u0928\u0947\u091f","\u30b9\u30c8\u30a2","\u30a2\u30de\u30be\u30f3","\uc0bc\uc131","\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd","\u5546\u6807","\u5546\u5e97","\u5546\u57ce","\u0434\u0435\u0442\u0438","\u043c\u043a\u0434","\u0435\u044e","\u30dd\u30a4\u30f3\u30c8","\u65b0\u95fb","\u5bb6\u96fb","\u0643\u0648\u0645","\u4e2d\u6587\u7f51","\u4e2d\u4fe1","\u4e2d\u56fd","\u4e2d\u570b","\u5a31\u4e50","\u8c37\u6b4c","\u0c2d\u0c3e\u0c30\u0c24\u0c4d","\u0dbd\u0d82\u0d9a\u0dcf","\u96fb\u8a0a\u76c8\u79d1","\u8d2d\u7269","\u30af\u30e9\u30a6\u30c9","\u0aad\u0abe\u0ab0\u0aa4","\u901a\u8ca9","\u092d\u093e\u0930\u0924\u092e\u094d","\u092d\u093e\u0930\u0924","\u092d\u093e\u0930\u094b\u0924","\u7f51\u5e97","\u0938\u0902\u0917\u0920\u0928","\u9910\u5385","\u7f51\u7edc","\u043a\u043e\u043c","\u0443\u043a\u0440","\u9999\u6e2f","\u4e9a\u9a6c\u900a","\u98df\u54c1","\u98de\u5229\u6d66","\u53f0\u6e7e","\u53f0\u7063","\u624b\u673a","\u043c\u043e\u043d","\u0627\u0644\u062c\u0632\u0627\u0626\u0631","\u0639\u0645\u0627\u0646","\u0627\u0631\u0627\u0645\u0643\u0648","\u0627\u06cc\u0631\u0627\u0646","\u0627\u0644\u0639\u0644\u064a\u0627\u0646","\u0627\u062a\u0635\u0627\u0644\u0627\u062a","\u0627\u0645\u0627\u0631\u0627\u062a","\u0628\u0627\u0632\u0627\u0631","\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627","\u067e\u0627\u06a9\u0633\u062a\u0627\u0646","\u0627\u0644\u0627\u0631\u062f\u0646","\u0628\u0627\u0631\u062a","\u0628\u06be\u0627\u0631\u062a","\u0627\u0644\u0645\u063a\u0631\u0628","\u0627\u0628\u0648\u0638\u0628\u064a","\u0627\u0644\u0628\u062d\u0631\u064a\u0646","\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629","\u0680\u0627\u0631\u062a","\u0643\u0627\u062b\u0648\u0644\u064a\u0643","\u0633\u0648\u062f\u0627\u0646","\u0647\u0645\u0631\u0627\u0647","\u0639\u0631\u0627\u0642","\u0645\u0644\u064a\u0633\u064a\u0627","\u6fb3\u9580","\ub2f7\ucef4","\u653f\u5e9c","\u0634\u0628\u0643\u0629","\u0628\u064a\u062a\u0643","\u0639\u0631\u0628","\u10d2\u10d4","\u673a\u6784","\u7ec4\u7ec7\u673a\u6784","\u5065\u5eb7","\u0e44\u0e17\u0e22","\u0633\u0648\u0631\u064a\u0629","\u62db\u8058","\u0440\u0443\u0441","\u0440\u0444","\u062a\u0648\u0646\u0633","\u5927\u62ff","\u0ea5\u0eb2\u0ea7","\u307f\u3093\u306a","\u30b0\u30fc\u30b0\u30eb","\u03b5\u03c5","\u03b5\u03bb","\u4e16\u754c","\u66f8\u7c4d","\u0d2d\u0d3e\u0d30\u0d24\u0d02","\u0a2d\u0a3e\u0a30\u0a24","\u7f51\u5740","\ub2f7\ub137","\u30b3\u30e0","\u5929\u4e3b\u6559","\u6e38\u620f","verm\xf6gensberater","verm\xf6gensberatung","\u4f01\u4e1a","\u4fe1\u606f","\u5609\u91cc\u5927\u9152\u5e97","\u5609\u91cc","\u0645\u0635\u0631","\u0642\u0637\u0631","\u5e7f\u4e1c","\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8","\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe","\u0570\u0561\u0575","\u65b0\u52a0\u5761","\u0641\u0644\u0633\u0637\u064a\u0646","\u653f\u52a1","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw"]},2043:function(e,t,n){var r,i;!function(o,a){"use strict";r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?o:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):e)}function c(t,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function l(e,n,r){return function(){typeof console!==t&&(c.call(this,n,r),this[e].apply(this,arguments))}}function s(e,t,n){return a(e)||l.apply(this,arguments)}function u(e,n,i){var o,a=this;n=null==n?"WARN":n;var l="loglevel";function u(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=n)}catch(i){}try{window.document.cookie=encodeURIComponent(l)+"="+n+";"}catch(i){}}}function d(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(i){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(l)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(i){}return void 0===a.levels[e]&&(e=void 0),e}}function f(){if(typeof window!==t&&l){try{return void window.localStorage.removeItem(l)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}"string"===typeof e?l+=":"+e:"symbol"===typeof e&&(l=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||s,a.getLevel=function(){return o},a.setLevel=function(n,r){if("string"===typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"===typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==r&&u(n),c.call(a,n,e),typeof console===t&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){n=e,d()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(n,!1),f()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var p=d();null==p&&(p=n),a.setLevel(p,!1)}var d=new u,f={};d.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new u(e,d.getLevel(),d.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=p),d},d.getLoggers=function(){return f},d.default=d,d},void 0===(i="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=i)}()},3454:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"===typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(7663)},7663:function(e){!function(){var t={229:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c,l=[],s=!1,u=-1;function d(){s&&c&&(s=!1,c.length?l=c.concat(l):u=-1,l.length&&f())}function f(){if(!s){var e=a(d);s=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,s=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||s||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,r),a=!1}finally{a&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},1163:function(e,t,n){e.exports=n(387)},9479:function(e,t,n){"use strict";n.d(t,{Fj:function(){return d}});var r=["Shift","Meta","Alt","Control"],i="object"==typeof navigator?navigator.platform:"",o=/Mac|iPod|iPhone|iPad/.test(i),a=o?"Meta":"Control",c="Win32"===i?["Control","Alt"]:o?["Alt"]:[];function l(e,t){return"function"==typeof e.getModifierState&&(e.getModifierState(t)||c.includes(t)&&e.getModifierState("AltGraph"))}function s(e){return e.trim().split(" ").map((function(e){var t=e.split(/\b\+/),n=t.pop();return[t=t.map((function(e){return"$mod"===e?a:e})),n]}))}function u(e,t){var n;void 0===t&&(t={});var i=null!=(n=t.timeout)?n:1e3,o=Object.keys(e).map((function(t){return[s(t),e[t]]})),a=new Map,c=null;return function(e){e instanceof KeyboardEvent&&(o.forEach((function(t){var n=t[0],i=t[1],o=a.get(n)||n;!function(e,t){return!(t[1].toUpperCase()!==e.key.toUpperCase()&&t[1]!==e.code||t[0].find((function(t){return!l(e,t)}))||r.find((function(n){return!t[0].includes(n)&&t[1]!==n&&l(e,n)})))}(e,o[0])?l(e,e.key)||a.delete(n):o.length>1?a.set(n,o.slice(1)):(a.delete(n),i(e))})),c&&clearTimeout(c),c=setTimeout(a.clear.bind(a),i))}}function d(e,t,n){var r;void 0===n&&(n={});var i=null!=(r=n.event)?r:"keydown",o=u(t,n);return e.addEventListener(i,o),function(){e.removeEventListener(i,o)}}},5271:function(e,t,n){"use strict";n.d(t,{IC:function(){return _i},tt:function(){return Zi},zc:function(){return qi},x3:function(){return $i},fZ:function(){return Cr},dQ:function(){return qr}});var r=n(7294);var i=e=>{const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),t},o=n(9594),a=n(1909);const c="[^\\.\\s@:](?:[^\\s@:]*[^\\s@:\\.])?@[^\\.\\s@]+(?:\\.[^\\.\\s@]+)*";function l({exact:e}={}){return e?new RegExp(`^${c}$`):new RegExp(c,"g")}function s(e){return e.split("-")[1]}function u(e){return"y"===e?"height":"width"}function d(e){return e.split("-")[0]}function f(e){return["top","bottom"].includes(d(e))?"x":"y"}function p(e,t,n){let{reference:r,floating:i}=e;const o=r.x+r.width/2-i.width/2,a=r.y+r.height/2-i.height/2,c=f(t),l=u(c),p=r[l]/2-i[l]/2,h="x"===c;let m;switch(d(t)){case"top":m={x:o,y:r.y-i.height};break;case"bottom":m={x:o,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:a};break;case"left":m={x:r.x-i.width,y:a};break;default:m={x:r.x,y:r.y}}switch(s(t)){case"start":m[c]-=p*(n&&h?-1:1);break;case"end":m[c]+=p*(n&&h?-1:1)}return m}const h=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,c=o.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let s=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=p(s,r,l),f=r,h={},m=0;for(let v=0;v<c.length;v++){const{name:n,fn:o}=c[v],{x:g,y:b,data:y,reset:w}=await o({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:s,platform:a,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=b?b:d,h={...h,[n]:{...h[n],...y}},w&&m<=50&&(m++,"object"==typeof w&&(w.placement&&(f=w.placement),w.rects&&(s=!0===w.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):w.rects),({x:u,y:d}=p(s,f,l))),v=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};function m(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function v(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function g(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:a,elements:c,strategy:l}=e,{boundary:s="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=t,h=m(p),g=c[f?"floating"===d?"reference":"floating":d],b=v(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(g)))||n?g:g.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(c.floating)),boundary:s,rootBoundary:u,strategy:l})),y="floating"===d?{...a.floating,x:r,y:i}:a.reference,w=await(null==o.getOffsetParent?void 0:o.getOffsetParent(c.floating)),k=await(null==o.isElement?void 0:o.isElement(w))&&await(null==o.getScale?void 0:o.getScale(w))||{x:1,y:1},E=v(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:w,strategy:l}):y);return{top:(b.top-E.top+h.top)/k.y,bottom:(E.bottom-b.bottom+h.bottom)/k.y,left:(b.left-E.left+h.left)/k.x,right:(E.right-b.right+h.right)/k.x}}const b=Math.min,y=Math.max;function w(e,t,n){return y(e,b(t,n))}const k=["top","right","bottom","left"],E=(k.reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function x(e){return e.replace(/left|right|bottom|top/g,(e=>E[e]))}function S(e,t,n){void 0===n&&(n=!1);const r=s(e),i=f(e),o=u(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=x(a)),{main:a,cross:x(a)}}const C={start:"end",end:"start"};function T(e){return e.replace(/start|end/g,(e=>C[e]))}const M=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...b}=e,y=d(r),w=d(a)===a,k=await(null==c.isRTL?void 0:c.isRTL(l.floating)),E=p||(w||!v?[x(a)]:function(e){const t=x(e);return[T(e),t,T(t)]}(a));p||"none"===m||E.push(...function(e,t,n,r){const i=s(e);let o=function(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:a;default:return[]}}(d(e),"start"===n,r);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(T)))),o}(a,v,m,k));const C=[a,...E],M=await g(t,b),P=[];let A=(null==(n=i.flip)?void 0:n.overflows)||[];if(u&&P.push(M[y]),f){const{main:e,cross:t}=S(r,o,k);P.push(M[e],M[t])}if(A=[...A,{placement:r,overflows:P}],!P.every((e=>e<=0))){var N;const e=((null==(N=i.flip)?void 0:N.index)||0)+1,t=C[e];if(t)return{data:{index:e,overflows:A},reset:{placement:t}};let n="bottom";switch(h){case"bestFit":{var L;const e=null==(L=A.map((e=>[e,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:L[0].placement;e&&(n=e);break}case"initialPlacement":n=a}if(r!==n)return{reset:{placement:n}}}return{}}}};const P=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),a=d(n),c=s(n),l="x"===f(n),u=["left","top"].includes(a)?-1:1,p=o&&l?-1:1,h="function"==typeof t?t(e):t;let{mainAxis:m,crossAxis:v,alignmentAxis:g}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return c&&"number"==typeof g&&(v="end"===c?-1*g:g),l?{x:v*p,y:m*u}:{x:m*u,y:v*p}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function A(e){return"x"===e?"y":"x"}const N=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:c={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=e,s={x:n,y:r},u=await g(t,l),p=f(d(i)),h=A(p);let m=s[p],v=s[h];if(o){const e="y"===p?"bottom":"right";m=w(m+u["y"===p?"top":"left"],m,m-u[e])}if(a){const e="y"===h?"bottom":"right";v=w(v+u["y"===h?"top":"left"],v,v-u[e])}const b=c.fn({...t,[p]:m,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r}}}}};function L(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function R(e){return L(e).getComputedStyle(e)}function O(e){return z(e)?(e.nodeName||"").toLowerCase():""}let D;function I(){if(D)return D;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(D=e.brands.map((e=>e.brand+"/"+e.version)).join(" "),D):navigator.userAgent}function _(e){return e instanceof L(e).HTMLElement}function j(e){return e instanceof L(e).Element}function z(e){return e instanceof L(e).Node}function Q(e){return"undefined"!=typeof ShadowRoot&&(e instanceof L(e).ShadowRoot||e instanceof ShadowRoot)}function F(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=R(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function $(e){return["table","td","th"].includes(O(e))}function U(e){const t=/firefox/i.test(I()),n=R(e),r=n.backdropFilter||n.WebkitBackdropFilter;return"none"!==n.transform||"none"!==n.perspective||!!r&&"none"!==r||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter||["transform","perspective"].some((e=>n.willChange.includes(e)))||["paint","layout","strict","content"].some((e=>{const t=n.contain;return null!=t&&t.includes(e)}))}function V(){return!/^((?!chrome|android).)*safari/i.test(I())}function W(e){return["html","body","#document"].includes(O(e))}const Z=Math.min,H=Math.max,q=Math.round;function B(e){const t=R(e);let n=parseFloat(t.width),r=parseFloat(t.height);const i=e.offsetWidth,o=e.offsetHeight,a=q(n)!==i||q(r)!==o;return a&&(n=i,r=o),{width:n,height:r,fallback:a}}function J(e){return j(e)?e:e.contextElement}const Y={x:1,y:1};function G(e){const t=J(e);if(!_(t))return Y;const n=t.getBoundingClientRect(),{width:r,height:i,fallback:o}=B(t);let a=(o?q(n.width):n.width)/r,c=(o?q(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),c&&Number.isFinite(c)||(c=1),{x:a,y:c}}function X(e,t,n,r){var i,o;void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),c=J(e);let l=Y;t&&(r?j(r)&&(l=G(r)):l=G(e));const s=c?L(c):window,u=!V()&&n;let d=(a.left+(u&&(null==(i=s.visualViewport)?void 0:i.offsetLeft)||0))/l.x,f=(a.top+(u&&(null==(o=s.visualViewport)?void 0:o.offsetTop)||0))/l.y,p=a.width/l.x,h=a.height/l.y;if(c){const e=L(c),t=r&&j(r)?L(r):r;let n=e.frameElement;for(;n&&r&&t!==e;){const e=G(n),t=n.getBoundingClientRect(),r=getComputedStyle(n);t.x+=(n.clientLeft+parseFloat(r.paddingLeft))*e.x,t.y+=(n.clientTop+parseFloat(r.paddingTop))*e.y,d*=e.x,f*=e.y,p*=e.x,h*=e.y,d+=t.x,f+=t.y,n=L(n).frameElement}}return{width:p,height:h,top:f,right:d+p,bottom:f+h,left:d,x:d,y:f}}function K(e){return((z(e)?e.ownerDocument:e.document)||window.document).documentElement}function ee(e){return j(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function te(e){return X(K(e)).left+ee(e).scrollLeft}function ne(e,t,n){const r=_(t),i=K(t),o=X(e,!0,"fixed"===n,t);let a={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==O(t)||F(i))&&(a=ee(t)),_(t)){const e=X(t,!0);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&(c.x=te(i));return{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function re(e){if("html"===O(e))return e;const t=e.assignedSlot||e.parentNode||(Q(e)?e.host:null)||K(e);return Q(t)?t.host:t}function ie(e){return _(e)&&"fixed"!==R(e).position?e.offsetParent:null}function oe(e){const t=L(e);let n=ie(e);for(;n&&$(n)&&"static"===R(n).position;)n=ie(n);return n&&("html"===O(n)||"body"===O(n)&&"static"===R(n).position&&!U(n))?t:n||function(e){let t=re(e);for(;_(t)&&!W(t);){if(U(t))return t;t=re(t)}return null}(e)||t}function ae(e){const t=re(e);return W(t)?e.ownerDocument.body:_(t)&&F(t)?t:ae(t)}function ce(e,t){var n;void 0===t&&(t=[]);const r=ae(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=L(r);return i?t.concat(o,o.visualViewport||[],F(r)?r:[]):t.concat(r,ce(r))}function le(e,t,n){return"viewport"===t?v(function(e,t){const n=L(e),r=K(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,c=0,l=0;if(i){o=i.width,a=i.height;const e=V();(e||!e&&"fixed"===t)&&(c=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:c,y:l}}(e,n)):j(t)?function(e,t){const n=X(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=_(e)?G(e):{x:1,y:1},a=e.clientWidth*o.x,c=e.clientHeight*o.y,l=i*o.x,s=r*o.y;return{top:s,left:l,right:l+a,bottom:s+c,x:l,y:s,width:a,height:c}}(t,n):v(function(e){var t;const n=K(e),r=ee(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=H(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=H(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let c=-r.scrollLeft+te(e);const l=-r.scrollTop;return"rtl"===R(i||n).direction&&(c+=H(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:c,y:l}}(K(e)))}const se={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o="clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=ce(e).filter((e=>j(e)&&"body"!==O(e))),i=null;const o="fixed"===R(e).position;let a=o?re(e):e;for(;j(a)&&!W(a);){const e=R(a),t=U(a);(o?t||i:t||"static"!==e.position||!i||!["absolute","fixed"].includes(i.position))?i=e:r=r.filter((e=>e!==a)),a=re(a)}return t.set(e,r),r}(t,this._c):[].concat(n),a=[...o,r],c=a[0],l=a.reduce(((e,n)=>{const r=le(t,n,i);return e.top=H(r.top,e.top),e.right=Z(r.right,e.right),e.bottom=Z(r.bottom,e.bottom),e.left=H(r.left,e.left),e}),le(t,c,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=_(n),o=K(n);if(n===o)return t;let a={scrollLeft:0,scrollTop:0},c={x:1,y:1};const l={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==O(n)||F(o))&&(a=ee(n)),_(n))){const e=X(n);c=G(n),l.x=e.x+n.clientLeft,l.y=e.y+n.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-a.scrollLeft*c.x+l.x,y:t.y*c.y-a.scrollTop*c.y+l.y}},isElement:j,getDimensions:function(e){return B(e)},getOffsetParent:oe,getDocumentElement:K,getScale:G,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||oe,o=this.getDimensions;return{reference:ne(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===R(e).direction};var ue=n(2043);function de(e){return"function"===typeof e}function fe(e){return function(t){if(function(e){return de(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}var pe=function(e,t){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},pe(e,t)};function he(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function me(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(u){o(u)}}function c(e){try{l(r.throw(e))}catch(u){o(u)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}l((r=r.apply(e,t||[])).next())}))}function ve(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}Object.create;function ge(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ye(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function we(e){return this instanceof we?(this.v=e,this):new we(e)}function ke(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||c(e,t)}))})}function c(e,t){try{!function(e){e.value instanceof we?Promise.resolve(e.value.v).then(l,s):d(o[0][2],e)}(i[e](t))}catch(u){d(o[0][3],u)}}function l(e){c("next",e)}function s(e){c("throw",e)}function d(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ee(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=ge(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;function xe(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Se=xe((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Ce(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Te=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=ge(o),c=a.next();!c.done;c=a.next()){c.value.remove(this)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(de(l))try{l()}catch(u){i=u instanceof Se?u.errors:[u]}var s=this._finalizers;if(s){this._finalizers=null;try{for(var d=ge(s),f=d.next();!f.done;f=d.next()){var p=f.value;try{Ae(p)}catch(m){i=null!==i&&void 0!==i?i:[],m instanceof Se?i=ye(ye([],be(i)),be(m.errors)):i.push(m)}}}catch(v){n={error:v}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}if(i)throw new Se(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Ae(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Ce(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Ce(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Me=Te.EMPTY;function Pe(e){return e instanceof Te||e&&"closed"in e&&de(e.remove)&&de(e.add)&&de(e.unsubscribe)}function Ae(e){de(e)?e():e.unsubscribe()}var Ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Le={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Le.delegate;return(null===i||void 0===i?void 0:i.setTimeout)?i.setTimeout.apply(i,ye([e,t],be(n))):setTimeout.apply(void 0,ye([e,t],be(n)))},clearTimeout:function(e){var t=Le.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Re(e){Le.setTimeout((function(){var t=Ne.onUnhandledError;if(!t)throw e;t(e)}))}function Oe(){}var De=Ie("C",void 0,void 0);function Ie(e,t,n){return{kind:e,value:t,error:n}}var _e=null;function je(e){if(Ne.useDeprecatedSynchronousErrorHandling){var t=!_e;if(t&&(_e={errorThrown:!1,error:null}),e(),t){var n=_e,r=n.errorThrown,i=n.error;if(_e=null,r)throw i}}else e()}var ze=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Pe(t)&&t.add(n)):n.destination=Ze,n}return he(t,e),t.create=function(e,t,n){return new Ue(e,t,n)},t.prototype.next=function(e){this.isStopped?We(function(e){return Ie("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?We(Ie("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?We(De,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Te),Qe=Function.prototype.bind;function Fe(e,t){return Qe.call(e,t)}var $e=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){Ve(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){Ve(n)}else Ve(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Ve(t)}},e}(),Ue=function(e){function t(t,n,r){var i,o,a=e.call(this)||this;de(t)||!t?i={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:a&&Ne.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},i={next:t.next&&Fe(t.next,o),error:t.error&&Fe(t.error,o),complete:t.complete&&Fe(t.complete,o)}):i=t;return a.destination=new $e(i),a}return he(t,e),t}(ze);function Ve(e){var t;Ne.useDeprecatedSynchronousErrorHandling?(t=e,Ne.useDeprecatedSynchronousErrorHandling&&_e&&(_e.errorThrown=!0,_e.error=t)):Re(e)}function We(e,t){var n=Ne.onStoppedNotification;n&&Le.setTimeout((function(){return n(e,t)}))}var Ze={closed:!0,next:Oe,error:function(e){throw e},complete:Oe};function He(e,t,n,r,i){return new qe(e,t,n,r,i)}var qe=function(e){function t(t,n,r,i,o,a){var c=e.call(this,t)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,c._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,c}return he(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(ze);function Be(e,t){return fe((function(n,r){var i=0;n.subscribe(He(r,(function(n){r.next(e.call(t,n,i++))})))}))}var Je=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function Ye(e){return de(null===e||void 0===e?void 0:e.then)}var Ge="function"===typeof Symbol&&Symbol.observable||"@@observable";function Xe(e){return e}function Ke(e){return 0===e.length?Xe:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var et=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof ze||function(e){return e&&de(e.next)&&de(e.error)&&de(e.complete)}(r)&&Pe(r)?e:new Ue(e,t,n);return je((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=tt(t))((function(t,r){var i=new Ue({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Ge]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ke(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=tt(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function tt(e){var t;return null!==(t=null!==e&&void 0!==e?e:Ne.Promise)&&void 0!==t?t:Promise}function nt(e){return de(e[Ge])}function rt(e){return Symbol.asyncIterator&&de(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}function it(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ot="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function at(e){return de(null===e||void 0===e?void 0:e[ot])}function ct(e){return ke(this,arguments,(function(){var t,n,r;return ve(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,we(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,we(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,we(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function lt(e){return de(null===e||void 0===e?void 0:e.getReader)}function st(e){if(e instanceof et)return e;if(null!=e){if(nt(e))return i=e,new et((function(e){var t=i[Ge]();if(de(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Je(e))return r=e,new et((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(Ye(e))return n=e,new et((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Re)}));if(rt(e))return ut(e);if(at(e))return t=e,new et((function(e){var n,r;try{for(var i=ge(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(lt(e))return ut(ct(e))}var t,n,r,i;throw it(e)}function ut(e){return new et((function(t){(function(e,t){var n,r,i,o;return me(this,void 0,void 0,(function(){var a,c;return ve(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Ee(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=l.sent(),i={error:c},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function dt(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!i)return o}function ft(e,t,n){return void 0===n&&(n=1/0),de(t)?ft((function(n,r){return Be((function(e,i){return t(n,e,r,i)}))(st(e(n,r)))}),n):("number"===typeof t&&(n=t),fe((function(t,r){return function(e,t,n,r,i,o,a,c){var l=[],s=0,u=0,d=!1,f=function(){!d||l.length||s||t.complete()},p=function(e){return s<r?h(e):l.push(e)},h=function(e){o&&t.next(e),s++;var c=!1;st(n(e,u++)).subscribe(He(t,(function(e){null===i||void 0===i||i(e),o?p(e):t.next(e)}),(function(){c=!0}),void 0,(function(){if(c)try{s--;for(var e=function(){var e=l.shift();a?dt(t,a,(function(){return h(e)})):h(e)};l.length&&s<r;)e();f()}catch(n){t.error(n)}})))};return e.subscribe(He(t,p,(function(){d=!0,f()}))),function(){null===c||void 0===c||c()}}(t,r,e,n)})))}function pt(){return void 0===(e=1)&&(e=1/0),ft(Xe,e);var e}function ht(e){return e[e.length-1]}function mt(e){return(t=ht(e))&&de(t.schedule)?e.pop():void 0;var t}function vt(e,t){return void 0===t&&(t=0),fe((function(n,r){n.subscribe(He(r,(function(n){return dt(r,e,(function(){return r.next(n)}),t)}),(function(){return dt(r,e,(function(){return r.complete()}),t)}),(function(n){return dt(r,e,(function(){return r.error(n)}),t)})))}))}function gt(e,t){return void 0===t&&(t=0),fe((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function bt(e,t){if(!e)throw new Error("Iterable cannot be null");return new et((function(n){dt(n,t,(function(){var r=e[Symbol.asyncIterator]();dt(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function yt(e,t){if(null!=e){if(nt(e))return function(e,t){return st(e).pipe(gt(t),vt(t))}(e,t);if(Je(e))return function(e,t){return new et((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(Ye(e))return function(e,t){return st(e).pipe(gt(t),vt(t))}(e,t);if(rt(e))return bt(e,t);if(at(e))return function(e,t){return new et((function(n){var r;return dt(n,t,(function(){r=e[ot](),dt(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(o){return void n.error(o)}i?n.complete():n.next(t)}),0,!0)})),function(){return de(null===r||void 0===r?void 0:r.return)&&r.return()}}))}(e,t);if(lt(e))return function(e,t){return bt(ct(e),t)}(e,t)}throw it(e)}function wt(e,t){return t?yt(e,t):st(e)}function kt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pt()(wt(e,mt(e)))}function Et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=mt(e);return fe((function(t,r){(n?kt(e,t,n):kt(e,t)).subscribe(r)}))}var xt=xe((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),St=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return he(t,e),t.prototype.lift=function(e){var t=new Ct(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new xt},t.prototype.next=function(e){var t=this;je((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=ge(t.currentObservers),o=i.next();!o.done;o=i.next()){o.value.next(e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;je((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;je((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?Me:(this.currentObservers=null,o.push(e),new Te((function(){t.currentObservers=null,Ce(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new et;return e.source=this,e},t.create=function(e,t){return new Ct(e,t)},t}(et),Ct=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return he(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Me},t}(St);function Tt(e,t){return fe((function(n,r){var i=0;n.subscribe(He(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}var Mt=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return he(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(St);function Pt(e){return fe((function(t,n){st(e).subscribe(He(n,(function(){return n.complete()}),Oe)),!n.closed&&t.subscribe(n)}))}function At(e,t,n,r,i){return function(o,a){var c=n,l=t,s=0;o.subscribe(He(a,(function(t){var n=s++;l=c?e(l,t,n):(c=!0,t),r&&a.next(l)}),i&&function(){c&&a.next(l),a.complete()}))}}function Nt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=mt(e);return wt(e,n)}var Lt=Array.isArray;function Rt(e){return Be((function(t){return function(e,t){return Lt(t)?e.apply(void 0,ye([],be(t))):e(t)}(e,t)}))}var Ot=["addListener","removeListener"],Dt=["addEventListener","removeEventListener"],It=["on","off"];function _t(e,t,n,r){if(de(n)&&(r=n,n=void 0),r)return _t(e,t,n).pipe(Rt(r));var i=be(function(e){return de(e.addEventListener)&&de(e.removeEventListener)}(e)?Dt.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return de(e.addListener)&&de(e.removeListener)}(e)?Ot.map(jt(e,t)):function(e){return de(e.on)&&de(e.off)}(e)?It.map(jt(e,t)):[],2),o=i[0],a=i[1];if(!o&&Je(e))return ft((function(e){return _t(e,t,n)}))(st(e));if(!o)throw new TypeError("Invalid event target");return new et((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return o(t),function(){return a(t)}}))}function jt(e,t){return function(n){return function(r){return e[n](t,r)}}}var zt=function(e){function t(t,n){return e.call(this)||this}return he(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Te),Qt={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Qt.delegate;return(null===i||void 0===i?void 0:i.setInterval)?i.setInterval.apply(i,ye([e,t],be(n))):setInterval.apply(void 0,ye([e,t],be(n)))},clearInterval:function(e){var t=Qt.delegate;return((null===t||void 0===t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Ft=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return he(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Qt.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Qt.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(u){r=!0,n=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ce(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(zt),$t={now:function(){return($t.delegate||Date).now()},delegate:void 0},Ut=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=$t.now,e}(),Vt=new(function(e){function t(t,n){void 0===n&&(n=Ut.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return he(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Ut))(Ft);var Wt=xe((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function Zt(e,t){var n,r=(n=e)instanceof Date&&!isNaN(n)?{first:e}:"number"===typeof e?{each:e}:e,i=r.first,o=r.each,a=r.with,c=void 0===a?Ht:a,l=r.scheduler,s=void 0===l?null!==t&&void 0!==t?t:Vt:l,u=r.meta,d=void 0===u?null:u;if(null==i&&null==o)throw new TypeError("No timeout provided.");return fe((function(e,t){var n,r,a=null,l=0,u=function(e){r=dt(t,s,(function(){try{n.unsubscribe(),st(c({meta:d,lastValue:a,seen:l})).subscribe(t)}catch(e){t.error(e)}}),e)};n=e.subscribe(He(t,(function(e){null===r||void 0===r||r.unsubscribe(),l++,t.next(a=e),o>0&&u(o)}),void 0,void 0,(function(){(null===r||void 0===r?void 0:r.closed)||null===r||void 0===r||r.unsubscribe(),a=null}))),!l&&u(null!=i?"number"===typeof i?i:+i-s.now():o)}))}function Ht(e){throw new Wt(e)}function qt(e,t){return e===t}var Bt=Object.defineProperty,Jt=Object.defineProperties,Yt=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,Xt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,en=(e,t,n)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tn=(e,t)=>{for(var n in t||(t={}))Xt.call(t,n)&&en(e,n,t[n]);if(Gt)for(var n of Gt(t))Kt.call(t,n)&&en(e,n,t[n]);return e},nn=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{c(n.next(e))}catch(u){i(u)}},a=e=>{try{c(n.throw(e))}catch(u){i(u)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);c((n=n.apply(e,t)).next())}));function rn(e){return e instanceof o.Ix}function on(){return"undefined"!==typeof document}var an=e=>{const t="(?:(?:[a-z]+:)?//)"+((e=tn({strict:!0},e)).strict?"":"?"),n=new RegExp("(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}","g").source,r=`(?:\\.${e.strict?"(?:[a-z\\u00a1-\\uffff]{2,})":`(?:${a.h.sort(((e,t)=>t.length-e.length)).join("|")})`})\\.?`,i=`(?:${t}|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|${n}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*${r})(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;return e.exact?new RegExp(`(?:^${i}$)`,"i"):new RegExp(i,"ig")};function cn(e,t){return nn(this,null,(function*(){const{x:n,y:r}=yield((e,t,n)=>{const r=new Map,i={platform:se,...n},o={...i.platform,_c:r};return h(e,t,{...i,platform:o})})(e,t,{placement:"top",middleware:[P(6),M(),N({padding:5})]});return{x:n,y:r}}))}var ln=[...[o.TQ.ConnectionStateChanged,o.TQ.RoomMetadataChanged,o.TQ.ActiveSpeakersChanged,o.TQ.ConnectionQualityChanged,o.TQ.ParticipantConnected,o.TQ.ParticipantDisconnected,o.TQ.ParticipantPermissionsChanged,o.TQ.ParticipantMetadataChanged,o.TQ.TrackMuted,o.TQ.TrackUnmuted,o.TQ.TrackPublished,o.TQ.TrackUnpublished,o.TQ.TrackStreamStateChanged,o.TQ.TrackSubscriptionFailed,o.TQ.TrackSubscriptionPermissionChanged,o.TQ.TrackSubscriptionStatusChanged],o.TQ.LocalTrackPublished,o.TQ.LocalTrackUnpublished],sn=(o.dd.ConnectionQualityChanged,o.dd.IsSpeakingChanged,o.dd.ParticipantMetadataChanged,o.dd.ParticipantPermissionsChanged,o.dd.TrackMuted,o.dd.TrackUnmuted,o.dd.TrackPublished,o.dd.TrackUnpublished,o.dd.TrackStreamStateChanged,o.dd.TrackSubscriptionFailed,o.dd.TrackSubscriptionPermissionChanged,o.dd.TrackSubscriptionStatusChanged,o.dd.LocalTrackPublished,o.dd.LocalTrackUnpublished,ue.getLogger("lk-components-js"));sn.setDefaultLevel("WARN");var un=[{columns:1,rows:1,name:"1x1",minTiles:1,maxTiles:1,minWidth:0,minHeight:0},{columns:1,rows:2,name:"1x2",minTiles:2,maxTiles:2,minWidth:0,minHeight:0},{columns:2,rows:1,name:"2x1",minTiles:2,maxTiles:2,minWidth:900,minHeight:0},{columns:2,rows:2,name:"2x2",minTiles:3,maxTiles:4,minWidth:560,minHeight:0},{columns:3,rows:3,name:"3x3",minTiles:5,maxTiles:9,minWidth:700,minHeight:0},{columns:4,rows:4,name:"4x4",minTiles:10,maxTiles:16,minWidth:960,minHeight:0},{columns:5,rows:5,name:"5x5",minTiles:17,maxTiles:25,minWidth:1100,minHeight:0}];function dn(e,t,n,r){let i=0,o=e.find(((e,n,r)=>{i=n;const o=-1!==r.findIndex(((t,r)=>{const i=r>n,o=t.maxTiles===e.maxTiles;return i&&o}));return e.maxTiles>=t&&!o}));if(void 0===o){if(o=e[e.length-1],!o)throw new Error("No layout or fallback layout found.");sn.warn(`No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${o.name}).`)}if((n<o.minWidth||r<o.minHeight)&&i>0){const t=e[i-1];o=dn(e.slice(0,i),t.maxTiles,n,r)}return o}var fn=[],pn={showChat:!1,unreadMessages:0};function hn(e){return"object"===typeof e}function mn(e){return Array.isArray(e)&&e.filter(hn).length>0}function vn(e){return"undefined"!==typeof e&&(function(e){var t;if(!e)return!1;return e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&"undefined"!==typeof(null==(t=e.publication)?void 0:t.track)}(e)||function(e){if(!e)return!1;return e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&"undefined"!==typeof e.publication}(e))}function gn(e){return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&"undefined"===typeof e.publication)}function bn(e){return"string"===typeof e||"number"===typeof e?`${e}`:vn(e)?`${e.participant.identity}_${e.publication.source}`:`${e.participant.identity}_${e.source}`}function yn(e,t){return t.audioLevel-e.audioLevel}function wn(e,t){return e.isSpeaking===t.isSpeaking?0:e.isSpeaking?-1:1}function kn(e,t){var n,r,i,o;return void 0!==e.lastSpokeAt||void 0!==t.lastSpokeAt?(null!=(r=null==(n=t.lastSpokeAt)?void 0:n.getTime())?r:0)-(null!=(o=null==(i=e.lastSpokeAt)?void 0:i.getTime())?o:0):0}function En(e,t){var n,r,i,o;return(null!=(r=null==(n=e.joinedAt)?void 0:n.getTime())?r:0)-(null!=(o=null==(i=t.joinedAt)?void 0:i.getTime())?o:0)}function xn(e){const t=[],n=[],r=[],i=[];e.forEach((e=>{e.participant.isLocal&&e.source===o.fQ.Source.Camera?t.push(e):e.source===o.fQ.Source.ScreenShare?n.push(e):e.source===o.fQ.Source.Camera?r.push(e):i.push(e)}));const a=function(e){const t=[],n=[];e.forEach((e=>{e.participant.isLocal?t.push(e):n.push(e)})),t.sort(((e,t)=>En(e.participant,t.participant))),n.sort(((e,t)=>En(e.participant,t.participant)));return[...n,...t]}(n),c=function(e){const t=[],n=[];return e.forEach((e=>{e.participant.isLocal?t.push(e):n.push(e)})),n.sort(((e,t)=>e.participant.isSpeaking&&t.participant.isSpeaking?yn(e.participant,t.participant):e.participant.isSpeaking!==t.participant.isSpeaking?wn(e.participant,t.participant):e.participant.lastSpokeAt!==t.participant.lastSpokeAt?kn(e.participant,t.participant):vn(e)!==vn(t)?function(e,t){return vn(e)?vn(t)?0:-1:vn(t)?1:0}(e,t):e.participant.isCameraEnabled!==t.participant.isCameraEnabled?function(e,t){const n=e.participant.isCameraEnabled;return n!==t.participant.isCameraEnabled?n?-1:1:0}(e,t):En(e.participant,t.participant))),[...t,...n]}(r);return[...t,...a,...c,...i]}function Sn(e,t){const n=Math.max(e.length,t.length);return new Array(n).fill([]).map(((n,r)=>[e[r],t[r]]))}function Cn(e,t,n){return e.filter((e=>!t.map((e=>n(e))).includes(n(e))))}function Tn(e){return e.map((e=>"string"===typeof e||"number"===typeof e?`${e}`:bn(e)))}function Mn(e,t){const n=t.findIndex((t=>bn(t)===bn(e)));if(-1===n)throw new Error(`Element not part of the array: ${bn(e)} not in ${Tn(t)}`);return n}function Pn(e,t){var n;return n=t,e.reduce(((e,t,r)=>r%n===0?[...e,[t]]:[...e.slice(0,-1),[...e.slice(-1)[0],t]]),[])}function An(e,t,n){let r=function(e,t){return e.map((e=>{const n=t.find((t=>bn(e)===bn(t)));return n||e}))}(e,t);if(e.length<t.length){const n=Cn(t,e,bn);r=[...r,...n]}if(Sn(Pn(e,n),Pn(t,n)).forEach((([e,t],i)=>{if(e&&t){const c=Pn(r,n)[i],l={dropped:Cn(o=c,a=t,bn),added:Cn(a,o,bn)};(function(e){return 0!==e.added.length||0!==e.dropped.length})(l)&&(sn.debug(`Detected visual changes on page: ${i}, current: ${Tn(e)}, next: ${Tn(t)}`,{changes:l}),l.added.length===l.dropped.length&&Sn(l.added,l.dropped).forEach((([e,t])=>{if(!e||!t)throw new Error(`For a swap action we need a addition and a removal one is missing: ${e}, ${t}`);r=function(e,t,n){const r=Mn(e,n),i=Mn(t,n);return n.splice(r,1,t),n.splice(i,1,e),n}(e,t,r)})),0===l.added.length&&l.dropped.length>0&&l.dropped.forEach((e=>{r=function(e,t){const n=Mn(e,t);return t.splice(n,1),t}(e,r)})),l.added.length>0&&0===l.dropped.length&&l.added.forEach((e=>{var t,n;t=e,n=r,r=[...n,t]})))}var o,a})),r.length>t.length){const n=Cn(e,t,bn);r=r.filter((e=>!n.map(bn).includes(bn(e))))}return r}function Nn(e,...t){return new et((n=>{const r=()=>{n.next(e)};t.forEach((t=>{e.on(t,r)}));return()=>{t.forEach((t=>{e.off(t,r)}))}})).pipe(Et(e))}function Ln(e,t){return new et((n=>{const r=(...e)=>{n.next(e)};e.on(t,r);return()=>{e.off(t,r)}}))}function Rn(e,t=!0){var n;const r=()=>nn(this,null,(function*(){const n=yield o.du.getLocalDevices(e,t);i.next(n)})),i=new St,a=i.pipe((c=()=>{var e;null==(e=null==navigator?void 0:navigator.mediaDevices)||e.removeEventListener("devicechange",r)},fe((function(e,t){try{e.subscribe(t)}finally{t.add(c)}}))));var c;if("undefined"!==typeof window){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");null==(n=null==navigator?void 0:navigator.mediaDevices)||n.addEventListener("devicechange",r)}return kt(o.du.getLocalDevices(e,t),a)}function On(e){return Nn(e,o.TQ.AudioPlaybackStatusChanged).pipe(Be((e=>({canPlayAudio:e.canPlaybackAudio}))))}function Dn(e){return`lk-${e}`}function In(e){if(vn(e))return e.publication;{const{source:t,name:n,participant:r}=e;if(t&&n)return r.getTracks().find((e=>e.source===t&&e.trackName===n));if(n)return r.getTrackByName(n);if(t)return r.getTrack(t);throw new Error("At least one of source and name needs to be defined")}}function _n(e,...t){return new et((n=>{const r=()=>{n.next(e)};t.forEach((t=>{e.on(t,r)}));return()=>{t.forEach((t=>{e.off(t,r)}))}})).pipe(Et(e))}function jn(e){const t=_n(e,o.dd.TrackMuted,o.dd.TrackUnmuted,o.dd.ParticipantPermissionsChanged,o.dd.TrackPublished,o.dd.TrackUnpublished,o.dd.TrackSubscribed,o.dd.TrackUnsubscribed,o.dd.LocalTrackPublished,o.dd.LocalTrackUnpublished,o.dd.MediaDevicesError).pipe(Be((e=>{const{isMicrophoneEnabled:t,isCameraEnabled:n,isScreenShareEnabled:r}=e,i=e.getTrack(o.fQ.Source.Microphone);return{isCameraEnabled:n,isMicrophoneEnabled:t,isScreenShareEnabled:r,cameraTrack:e.getTrack(o.fQ.Source.Camera),microphoneTrack:i,participant:e}})));return t}function zn(e,t){return new et((n=>{const r=(...e)=>{n.next(e)};e.on(t,r);return()=>{e.off(t,r)}}))}function Qn(e,t){var n,r;return _n(e,o.dd.TrackMuted,o.dd.TrackUnmuted,o.dd.TrackSubscribed,o.dd.TrackUnsubscribed,o.dd.LocalTrackPublished,o.dd.LocalTrackUnpublished).pipe(Be((e=>{var n;const r=e.getTrack(t);return null==(n=null==r?void 0:r.isMuted)||n})),Et(null==(r=null==(n=e.getTrack(t))?void 0:n.isMuted)||r))}function Fn(e,t,n){const r=new Mt(void 0),i=t?function(e,t){return Ln(e,o.TQ.ActiveDeviceChanged).pipe(Tt((([e])=>e===t)),Be((([e,t])=>(sn.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:e,deviceId:t}),t))),Et(e.getActiveDevice(t)))}(t,e):r.asObservable();return{className:Dn("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:(i,...a)=>nn(this,[i,...a],(function*(i,a={}){var c,l,s;if(t){sn.debug(`Switching active device of kind "${e}" with id ${i}.`),yield t.switchActiveDevice(e,i,a.exact);const n=null!=(c=t.getActiveDevice(e))?c:i;let u;n!==i&&"default"!==i&&sn.info(`We tried to select the device with id (${i}), but the browser decided to select the device with id (${n}) instead.`),"audioinput"===e?u=null==(l=t.localParticipant.getTrack(o.fQ.Source.Microphone))?void 0:l.track:"videoinput"===e&&(u=null==(s=t.localParticipant.getTrack(o.fQ.Source.Camera))?void 0:s.track);const d="default"===i&&!u||"default"===i&&(null==u?void 0:u.mediaStreamTrack.label.startsWith("Default"));r.next(d?i:n)}else if(n){yield n.setDeviceId(a.exact?{exact:i}:i);const e=yield n.getDeviceId();r.next("default"===i&&n.mediaStreamTrack.label.startsWith("Default")?i:e)}else r.value!==i&&(sn.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(i))}))}}function $n(e){const t=Dn("connection-quality"),n=function(e){return zn(e,o.dd.ConnectionQualityChanged).pipe(Be((([e])=>e)),Et(e.connectionQuality))}(e);return{className:t,connectionQualityObserver:n}}function Un(e){const t=function(e){const t=_n(e,o.dd.ParticipantMetadataChanged).pipe(Be((({name:e,identity:t,metadata:n})=>({name:e,identity:t,metadata:n}))),Et({name:e.name,identity:e.identity,metadata:e.metadata}));return t}(e);return{className:"lk-participant-name",infoObserver:t}}var Vn="lk-chat-topic";function Wn(e,t,n){return nn(this,arguments,(function*(e,t,n,r={}){const{kind:i,destination:a}=r;yield e.publishData(t,null!=i?i:o.WO.RELIABLE,{destination:a,topic:n})}))}function Zn(e,t,n){const r=function(e){return Ln(e,o.TQ.DataReceived)}(e).pipe(Tt((([,,,e])=>void 0===t||e===t)),Be((([e,t,,r])=>{const i={payload:e,topic:r,from:t};return null==n||n(i),i})));let i;return{messageObservable:r,isSendingObservable:new et((e=>{i=e})),send:(n,...r)=>nn(this,[n,...r],(function*(n,r={}){i.next(!0);try{yield Wn(e.localParticipant,n,t,r)}finally{i.next(!1)}}))}}var Hn=new TextEncoder,qn=new TextDecoder;function Bn(e){const t=new St,n=new St,{messageObservable:r}=Zn(e,Vn);r.pipe(Pt(t)).subscribe(n);const i=n.pipe(Be((e=>{const t=JSON.parse(qn.decode(e.payload)),n=((e,t)=>Jt(e,Yt(t)))(tn({},t),{from:e.from});return n})),function(e,t){return fe(At(e,t,arguments.length>=2,!0))}(((e,t)=>[...e,t]),[]),Pt(t)),a=new Mt(!1);return{messageObservable:i,isSendingObservable:a,send:t=>nn(this,null,(function*(){const r=Date.now(),i=Hn.encode(JSON.stringify({timestamp:r,message:t}));a.next(!0);try{yield Wn(e.localParticipant,i,Vn,{kind:o.WO.RELIABLE}),n.next({payload:i,topic:Vn,from:e.localParticipant})}finally{a.next(!1)}})),destroy:function(){t.next(),t.complete()}}}function Jn(e,t,n=!0){const r=[e.localParticipant,...Array.from(e.participants.values())],i=[];return r.forEach((e=>{t.forEach((t=>{const r=Array.from(e.tracks.values()).filter((e=>e.source===t&&(!n||e.track))).map((t=>({participant:e,publication:t,source:t.source})));i.push(...r)}))})),{trackReferences:i,participants:r}}function Yn(e,t=1e3){if(null===e)return Nt(!1);const n=_t(e,"mousemove",{passive:!0}).pipe(Be((()=>!0))),r=n.pipe(Zt({each:t,with:()=>{return kt(Nt(!1),r.pipe((e=n,fe((function(t,n){var r=!1,i=He(n,(function(){null===i||void 0===i||i.unsubscribe(),r=!0}),Oe);st(e).subscribe(i),t.subscribe(He(n,(function(e){return r&&n.next(e)})))})))));var e}}),(void 0===o&&(o=Xe),i=null!==i&&void 0!==i?i:qt,fe((function(e,t){var n,r=!0;e.subscribe(He(t,(function(e){var a=o(e);!r&&i(n,a)||(r=!1,n=a,t.next(e))})))}))));var i,o;return r}function Gn(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Gn(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var Xn,Kn=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Gn(e))&&(r&&(r+=" "),r+=t);return r},er=Object.defineProperty,tr=Object.defineProperties,nr=Object.getOwnPropertyDescriptors,rr=Object.getOwnPropertySymbols,ir=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,ar=(e,t,n)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cr=(e,t)=>{for(var n in t||(t={}))ir.call(t,n)&&ar(e,n,t[n]);if(rr)for(var n of rr(t))or.call(t,n)&&ar(e,n,t[n]);return e},lr=(e,t)=>tr(e,nr(t)),sr=(e,t)=>{var n={};for(var r in e)ir.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&rr)for(var r of rr(e))t.indexOf(r)<0&&or.call(e,r)&&(n[r]=e[r]);return n},ur=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{c(n.next(e))}catch(u){i(u)}},a=e=>{try{c(n.throw(e))}catch(u){i(u)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);c((n=n.apply(e,t)).next())}));var dr=()=>Xn||(Xn=function(){let e=!1,t=[];const n=new Map;if("undefined"===typeof window)return;const r=new ResizeObserver(((r,i)=>{t=t.concat(r),e||window.requestAnimationFrame((()=>{const r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);const o=n.get(t[e].target);null==o||o.forEach((n=>n(t[e],i)))}t=[],e=!1})),e=!0}));return{observer:r,subscribe(e,t){var i;r.observe(e);const o=null!=(i=n.get(e))?i:[];o.push(t),n.set(e,o)},unsubscribe(e,t){var i;const o=null!=(i=n.get(e))?i:[];if(1===o.length)return r.unobserve(e),void n.delete(e);const a=o.indexOf(t);-1!==a&&o.splice(a,1),n.set(e,o)}}}()),fr=e=>{const[t,n]=r.useState({width:0,height:0});r.useLayoutEffect((()=>{if(e.current){const{width:t,height:r}=e.current.getBoundingClientRect();n({width:t,height:r})}}),[e.current]);const o=r.useCallback((e=>n(e.contentRect)),[]);return function(e,t){const n=dr(),o=i(t);r.useLayoutEffect((()=>{let t=!1;const r=e.current;if(r)return null==n||n.subscribe(r,i),()=>{t=!0,null==n||n.unsubscribe(r,i)};function i(e,n){t||o.current(e,n)}}),[e.current,n,o]),null==n||n.observer}(e,o),t};function pr(e,t){const[n,i]=r.useState(t);return r.useEffect((()=>{if("undefined"===typeof window||!e)return;const t=e.subscribe(i);return()=>t.unsubscribe()}),[e]),n}function hr(e,t){if("show_chat"===t.msg)return lr(cr({},e),{showChat:!0,unreadMessages:0});if("hide_chat"===t.msg)return lr(cr({},e),{showChat:!1});if("toggle_chat"===t.msg){const t=lr(cr({},e),{showChat:!e.showChat});return!0===t.showChat&&(t.unreadMessages=0),t}return"unread_msg"===t.msg?lr(cr({},e),{unreadMessages:t.count}):cr({},e)}function mr(e,t){return"set_pin"===t.msg?[t.trackReference]:"clear_pin"===t.msg?[]:cr({},e)}var vr=r.createContext(void 0);function gr(){const e=r.useContext(vr);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function br(){return r.useContext(vr)}var yr=r.createContext(void 0);function wr(){return r.useContext(yr)}var kr=r.createContext(void 0);function Er(){return r.useContext(kr)}function xr(e){var t;const n=Er(),r=wr(),i=null!=(t=null!=e?e:n)?t:null==r?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var Sr=r.createContext(void 0);function Cr(){const e=r.useContext(Sr);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function Tr(){return r.useContext(Sr)}function Mr(e){const t=Tr(),n=null!=e?e:t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}function Pr(...e){return(...t)=>{for(const n of e)"function"===typeof n&&n(...t)}}function Ar(...e){const t=cr({},e[0]);for(let n=1;n<e.length;n++){const r=e[n];for(const e in r){const n=t[e],i=r[e];"function"===typeof n&&"function"===typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&e.charCodeAt(2)<=90?t[e]=Pr(n,i):t[e]="className"!==e&&"UNSAFE_className"!==e||"string"!==typeof n||"string"!==typeof i?void 0!==i?i:n:Kn(n,i)}}return t}function Nr(e){const t=Mr(e),n=r.useMemo((()=>function(e){return Ln(e,o.TQ.ConnectionStateChanged).pipe(Be((([e])=>e)),Et(e.state))}(t)),[t]);return pr(n,t.state)}function Lr(e){const t=Cr(),n=Nr(t),i=r.useMemo((()=>{const{className:r,disconnect:i}=function(e){return{className:Dn("disconnect-button"),disconnect:t=>{e.disconnect(t)}}}(t);return Ar(e,{className:r,onClick:()=>{var t;return i(null==(t=e.stopTracks)||t)},disabled:n===o.em.Disconnected})}),[t,e,n]);return{buttonProps:i}}function Rr({trackSource:e,participant:t,props:n}){const i=xr(t),o=br(),{className:a}=r.useMemo((()=>({className:[Dn("button"),Dn("focus-toggle-button")].join(" ")})),[]),c=r.useMemo((()=>{const t=i.getTrack(e);return!(!(null==o?void 0:o.pin.state)||!t)&&(n={participant:i,source:e,publication:t},"undefined"!==typeof(r=o.pin.state)&&(vn(n)?r.some((e=>e.participant.identity===n.participant.identity&&vn(e)&&e.publication.trackSid===n.publication.trackSid)):!!gn(n)&&r.some((e=>e.participant.identity===n.participant.identity&&gn(e)&&e.source===n.source))));var n,r}),[i,e,o]);return{mergedProps:r.useMemo((()=>Ar(n,{className:a,onClick:t=>{var r;null==(r=n.onClick)||r.call(n,t);const a=i.getTrack(e);(null==o?void 0:o.pin.dispatch)&&a&&(c?o.pin.dispatch({msg:"clear_pin"}):o.pin.dispatch({msg:"set_pin",trackReference:{participant:i,publication:a,source:a.source}}))}})),[n,a,i,e,c,o]),inFocus:c}}function Or(e,t){const{width:n,height:i}=fr(e),o=n>0&&i>0?dn(un,t,n,i):un[0];return r.useEffect((()=>{e.current&&o&&(e.current.style.setProperty("--lk-col-count",null==o?void 0:o.columns.toString()),e.current.style.setProperty("--lk-row-count",null==o?void 0:o.rows.toString()))}),[e,o]),{layout:o}}function Dr(e,t={}){var n;const i=xr(t.participant),[o,a]=r.useState(!!(null==(n=i.getTrack(e))?void 0:n.isMuted));return r.useEffect((()=>{const t=Qn(i,e).subscribe(a);return()=>t.unsubscribe()}),[i,e]),o}function Ir(e){const t=xr(e),n=r.useMemo((()=>function(e){return zn(e,o.dd.IsSpeakingChanged).pipe(Be((([e])=>e)))}(t)),[t]);return pr(n,t.isSpeaking)}var _r={connect:!0,audio:!1,video:!1};function jr(){const e=Cr();return pr(r.useMemo((()=>{return zn(t=e.localParticipant,o.dd.ParticipantPermissionsChanged).pipe(Be((()=>t.permissions)),Et(t.permissions));var t}),[e]),e.localParticipant.permissions)}function zr(e){return void 0!==e}function Qr(...e){return Ar(...e.filter(zr))}function Fr(e,t,n){return r.Children.map(e,(i=>r.isValidElement(i)&&r.Children.only(e)?r.cloneElement(i,lr(cr({},t),{key:n})):i))}function $r(e,t={}){const[n,i]=r.useState(In(e)),[a,c]=r.useState(null==n?void 0:n.isMuted),[l,s]=r.useState(null==n?void 0:n.isSubscribed),[u,d]=r.useState(null==n?void 0:n.track),[f,p]=r.useState("landscape"),h=r.useRef(),{className:m,trackObserver:v}=r.useMemo((()=>function(e){const t=In(e),n=jn(e.participant).pipe(Be((()=>In(e))),Et(t));return{className:Dn(e.source===o.fQ.Source.Camera||e.source===o.fQ.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}(e)),[e.participant.identity,e.source,vn(e)&&e.publication.trackSid]);return r.useEffect((()=>{const e=v.subscribe((e=>{sn.debug("update track",e),i(e),c(null==e?void 0:e.isMuted),s(null==e?void 0:e.isSubscribed),d(null==e?void 0:e.track)}));return()=>null==e?void 0:e.unsubscribe()}),[v]),r.useEffect((()=>{var n,r;return u&&(h.current&&u.detach(h.current),!(null==(n=t.element)?void 0:n.current)||rn(e.participant)&&"audio"===(null==u?void 0:u.kind)||u.attach(t.element.current)),h.current=null==(r=t.element)?void 0:r.current,()=>{h.current&&(null==u||u.detach(h.current))}}),[u,t.element]),r.useEffect((()=>{var e,t;if("number"===typeof(null==(e=null==n?void 0:n.dimensions)?void 0:e.width)&&"number"===typeof(null==(t=null==n?void 0:n.dimensions)?void 0:t.height)){const e=n.dimensions.width>n.dimensions.height?"landscape":"portrait";p(e)}}),[n]),{publication:n,isMuted:a,isSubscribed:l,track:u,elementProps:Qr(t.props,cr({className:m,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":null==n?void 0:n.source},"video"===(null==n?void 0:n.kind)&&{"data-lk-orientation":f}))}}function Ur(e,t,n={}){const i=r.useRef([]),o=r.useRef(-1),a=t!==o.current,c="function"===typeof n.customSortFunction?n.customSortFunction(e):xn(e);let l=[...c];if(!1===a)try{l=An(i.current,c,t)}catch(s){sn.error("Error while running updatePages(): ",s)}return i.current=a?c:l,o.current=t,l}function Vr({participant:e,source:t,publication:n,onParticipantClick:i,disableSpeakingIndicator:a,htmlProps:c}){const l=xr(e),s=r.useMemo((()=>{const{className:e}={className:Dn("participant-tile")};return Ar(c,{className:e,onClick:e=>{var r;if(null==(r=c.onClick)||r.call(c,e),"function"===typeof i){const e=null!=n?n:l.getTrack(t);i({participant:l,track:e})}}})}),[c,t,i,l,n]),u=Dr(o.fQ.Source.Camera,{participant:e}),d=Dr(o.fQ.Source.Microphone,{participant:e}),f=Ir(e),p=function(e){if(e.publication instanceof o.Zr){const t=e.publication.track;if(t){const{facingMode:e}=(0,o.ul)(t);return e}}return"undefined"}({participant:e,publication:n,source:t});return{elementProps:cr({"data-lk-audio-muted":d,"data-lk-video-muted":u,"data-lk-speaking":!0!==a&&f,"data-lk-local-participant":e.isLocal,"data-lk-source":t,"data-lk-facing-mode":p},s)}}function Wr(e){return e=function(e){const t=br();if(null!=e||(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}(e),r.useMemo((()=>void 0!==(null==e?void 0:e.pin.state)&&e.pin.state.length>=1?e.pin.state:[]),[e.pin.state])}function Zr({room:e,props:t}){const n=Mr(e),{className:i,roomAudioPlaybackAllowedObservable:o,handleStartAudioPlayback:a}=r.useMemo((()=>function(){return{className:Dn("start-audio-button"),roomAudioPlaybackAllowedObservable:On,handleStartAudioPlayback:e=>nn(this,null,(function*(){sn.info("Start Audio for room: ",e),yield e.startAudio()}))}}()),[]),c=r.useMemo((()=>o(n)),[n,o]),{canPlayAudio:l}=pr(c,{canPlayAudio:!1});return{mergedProps:r.useMemo((()=>Ar(t,{className:i,onClick:()=>{a(n)},style:{display:l?"none":"block"}})),[t,i,l,a,n]),canPlayAudio:l}}function Hr({props:e}){const{dispatch:t,state:n}=gr().widget,{className:i}=r.useMemo((()=>({className:[Dn("button"),Dn("chat-toggle")].join(" ")})),[]);return{mergedProps:r.useMemo((()=>Ar(e,{className:i,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":(null==n?void 0:n.showChat)?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"})),[e,i,t,n])}}function qr(e,t,n={}){const[i,o]=r.useState(void 0);return r.useEffect((()=>{var r;if(void 0===e)throw Error("token endpoint needs to be defined");if(void 0===(null==(r=n.userInfo)?void 0:r.identity))return;(()=>{ur(this,null,(function*(){sn.debug("fetching token");const r=new URLSearchParams(lr(cr({},n.userInfo),{roomName:t})),i=yield fetch(`${e}?${r.toString()}`),{accessToken:a}=yield i.json();o(a)}))})()}),[e,t,n]),i}function Br(e,t={}){var n;const i=xr(t.participant),{className:a,mediaMutedObserver:c}=r.useMemo((()=>function(e,t){let n="track-muted-indicator-camera";switch(t){case o.fQ.Source.Camera:n="track-muted-indicator-camera";break;case o.fQ.Source.Microphone:n="track-muted-indicator-microphone"}return{className:Dn(n),mediaMutedObserver:Qn(e,t)}}(i,e)),[i,e]);return{isMuted:pr(c,!!(null==(n=i.getTrack(e))?void 0:n.isMuted)),className:a}}function Jr(e){var t,n=e,{source:i,onChange:a,initialState:c,captureOptions:l}=n,s=sr(n,["source","onChange","initialState","captureOptions"]);const u=Tr(),d=null==(t=null==u?void 0:u.localParticipant)?void 0:t.getTrack(i),{toggle:f,className:p,pendingObserver:h,enabledObserver:m}=r.useMemo((()=>u?function(e,t,n){const{localParticipant:r}=t,i=(e,t)=>{let n=!1;switch(e){case o.fQ.Source.Camera:n=t.isCameraEnabled;break;case o.fQ.Source.Microphone:n=t.isMicrophoneEnabled;break;case o.fQ.Source.ScreenShare:n=t.isScreenShareEnabled}return n},a=jn(r).pipe(Be((t=>i(e,t.participant))),Et(i(e,r))),c=new St;return{className:Dn("button"),toggle:(t,i)=>nn(this,null,(function*(){try{switch(null!=i||(i=n),c.next(!0),e){case o.fQ.Source.Camera:yield r.setCameraEnabled(null!=t?t:!r.isCameraEnabled,i);break;case o.fQ.Source.Microphone:yield r.setMicrophoneEnabled(null!=t?t:!r.isMicrophoneEnabled,i);break;case o.fQ.Source.ScreenShare:yield r.setScreenShareEnabled(null!=t?t:!r.isScreenShareEnabled,i)}}finally{c.next(!1)}})),enabledObserver:a,pendingObserver:c.asObservable()}}(i,u,l):function(){let e=!1;const t=new St,n=new St;return{className:Dn("button"),toggle:r=>{n.next(!0),e=null!=r?r:!e,t.next(e),n.next(!1)},enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}()),[u,i,JSON.stringify(l)]),v=pr(h,!1),g=pr(m,null!=c?c:!!(null==d?void 0:d.isEnabled));r.useEffect((()=>{null==a||a(g)}),[g,a]),r.useEffect((()=>{void 0!==c&&(sn.debug("forcing initial toggle state",i,c),f(c))}),[]);const b=r.useMemo((()=>Ar(s,{className:p})),[s,p]),y=r.useCallback((e=>{var t;f(),null==(t=s.onClick)||t.call(s,e)}),[s,f]);return{toggle:f,enabled:g,pending:v,track:d,buttonProps:lr(cr({},b),{"aria-pressed":g,"data-lk-source":i,"data-lk-enabled":g,disabled:v,onClick:y})}}function Yr(e=[o.fQ.Source.Camera,o.fQ.Source.Microphone,o.fQ.Source.ScreenShare,o.fQ.Source.ScreenShareAudio,o.fQ.Source.Unknown],t={}){const n=Mr(t.room),[i,a]=r.useState([]),[c,l]=r.useState([]),s=r.useMemo((()=>e.map((e=>hn(e)?e.source:e))),[JSON.stringify(e)]);r.useEffect((()=>{const e=function(e,t,n){var r,i;const a=null!=(r=n.additionalRoomEvents)?r:ln,c=null==(i=n.onlySubscribed)||i;return Nn(e,...Array.from(new Set([o.TQ.ParticipantConnected,o.TQ.ConnectionStateChanged,o.TQ.LocalTrackPublished,o.TQ.LocalTrackUnpublished,o.TQ.TrackPublished,o.TQ.TrackUnpublished,o.TQ.TrackSubscriptionStatusChanged,...a]).values())).pipe(Be((e=>{const n=Jn(e,t,c);return sn.debug(`TrackReference[] was updated. (length ${n.trackReferences.length})`,n),n})),Et(Jn(e,t,c)))}(n,s,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe((({trackReferences:e,participants:t})=>{sn.debug("setting track bundles",e,t),a(e),l(t)}));return()=>e.unsubscribe()}),[n,JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]);const u=r.useMemo((()=>{if(mn(e)){const t=function(e,t){const n=new Map;if(mn(e)){const r=e.filter((e=>e.withPlaceholder)).map((e=>e.source));t.forEach((e=>{const t=e.getTracks().map((e=>{var t;return null==(t=e.track)?void 0:t.source})).filter((e=>void 0!==e)),i=Array.from(function(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}(new Set(r),new Set(t)));i.length>0&&n.set(e.identity,i)}))}return n}(e,c),n=Array.from(i);return c.forEach((e=>{var r;if(t.has(e.identity)){(null!=(r=t.get(e.identity))?r:[]).forEach((t=>{if(i.find((({participant:n,publication:r})=>e.identity===n.identity&&r.source===t)))return;sn.debug(`Add ${t} placeholder for participant ${e.identity}.`);const r={participant:e,source:t};n.push(r)}))}})),n}return i}),[i,c,e]);return u}function Gr(e){const{mergedProps:t}=Hr({props:e});return r.createElement("button",cr({},t),e.children)}function Xr(e){const{buttonProps:t}=Lr(e);return r.createElement("button",cr({},t),e.children)}var Kr=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),r.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),ei=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),ti=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),ni=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),ri=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},r.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),ii=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),oi=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),r.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),ai=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),r.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),ci=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),li=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),si=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),ui=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),di=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),fi=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},e),r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),r.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),pi=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),hi=e=>r.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},r.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"})));function mi(e){var t=e,{trackSource:n,participant:i}=t,o=sr(t,["trackSource","participant"]);const{mergedProps:a,inFocus:c}=Rr({trackSource:n,participant:i,props:o});return r.createElement(vr.Consumer,null,(e=>void 0!==e&&r.createElement("button",cr({},a),o.children?o.children:c?r.createElement(hi,null):r.createElement(ri,null))))}function vi(e){var t=e,{kind:n,initialSelection:i,onActiveDeviceChange:o,onDeviceListChange:a,onDeviceSelectError:c,exactMatch:l,track:s,requestPermissions:d}=t,f=sr(t,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions"]);const p=Tr(),{devices:h,activeDeviceId:m,setActiveMediaDevice:v,className:g}=function({kind:e,room:t,track:n,requestPermissions:i}){const o=Tr(),a=pr(r.useMemo((()=>Rn(e,i)),[e,i]),[]),[c,l]=r.useState(""),{className:s,activeDeviceObservable:u,setActiveMediaDevice:d}=r.useMemo((()=>Fn(e,null!=t?t:o,n)),[e,t,o,n]);return r.useEffect((()=>{const e=u.subscribe((e=>{sn.info("setCurrentDeviceId",e),e&&l(e)}));return()=>{null==e||e.unsubscribe()}}),[u]),{devices:a,className:s,activeDeviceId:c,setActiveMediaDevice:d}}({kind:n,room:p,track:s,requestPermissions:d});r.useEffect((()=>{void 0!==i&&v(i)}),[v]),r.useEffect((()=>{"function"===typeof a&&a(h)}),[a,h]),r.useEffect((()=>{m&&""!==m&&(null==o||o(m))}),[m]);const b=e=>ur(this,null,(function*(){try{yield v(e,{exact:l})}catch(u){if(!(u instanceof Error))throw u;null==c||c(u)}})),y=r.useMemo((()=>Qr(f,{className:g},{className:"lk-list"})),[g,f]);function w(e,t,n){return e===t||0===n&&"default"===t}return r.createElement("ul",cr({},y),h.map(((e,t)=>r.createElement("li",{key:e.deviceId,id:e.deviceId,"data-lk-active":w(e.deviceId,m,t),"aria-selected":w(e.deviceId,m,t),role:"option"},r.createElement("button",{className:"lk-button",onClick:()=>b(e.deviceId)},e.label)))))}function gi(e){var t=e,{label:n="Allow Audio"}=t,i=sr(t,["label"]);const o=Cr(),{mergedProps:a}=Zr({room:o,props:i});return r.createElement("button",cr({},a),n)}function bi(e,t){switch(e){case o.fQ.Source.Microphone:return t?r.createElement(ai,null):r.createElement(oi,null);case o.fQ.Source.Camera:return t?r.createElement(ei,null):r.createElement(Kr,null);case o.fQ.Source.ScreenShare:return t?r.createElement(fi,null):r.createElement(di,null);default:return}}function yi(e){var t=e,{showIcon:n}=t,i=sr(t,["showIcon"]);const{buttonProps:o,enabled:a}=Jr(i);return r.createElement("button",cr({},o),(null==n||n)&&bi(i.source,a),i.children)}function wi(e){var t;const{className:n,quality:i}=function(e={}){const t=xr(e.participant),{className:n,connectionQualityObserver:i}=r.useMemo((()=>$n(t)),[t]);return{className:n,quality:pr(i,o.ZV.Unknown)}}(e),a=r.useMemo((()=>lr(cr({},Qr(e,{className:n})),{"data-lk-quality":i})),[i,e,n]);return r.createElement("div",cr({},a),null!=(t=e.children)?t:function(e){switch(e){case o.ZV.Excellent:return r.createElement(ci,null);case o.ZV.Good:return r.createElement(li,null);case o.ZV.Poor:return r.createElement(si,null);default:return r.createElement(ui,null)}}(i))}function ki(e){var t=e,{participant:n}=t,i=sr(t,["participant"]);const o=xr(n),{className:a,infoObserver:c}=r.useMemo((()=>Un(o)),[o]),{identity:l,name:s}=pr(c,{name:o.name,identity:o.identity,metadata:o.metadata}),u=r.useMemo((()=>Qr(i,{className:a,"data-lk-participant-name":s})),[i,a,s]);return r.createElement("span",cr({},u),""!==s?s:l,i.children)}function Ei(e){var t,n=e,{source:i,participant:o,show:a="always"}=n,c=sr(n,["source","participant","show"]);const{className:l,isMuted:s}=Br(i,{participant:o}),u="always"===a||"muted"===a&&s||"unmuted"===a&&!s,d=r.useMemo((()=>Qr(c,{className:l})),[l,c]);return u?r.createElement("div",lr(cr({},d),{"data-lk-muted":s}),null!=(t=c.children)?t:bi(i,!s)):null}var xi=e=>r.createElement("svg",cr({width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),r.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function Si(e){var t=e,{onTrackClick:n,onClick:i,onSubscriptionStatusChanged:o,name:a,publication:c,source:l,participant:s}=t,u=sr(t,["onTrackClick","onClick","onSubscriptionStatusChanged","name","publication","source","participant"]);const d=r.useRef(null),f=xr(s),{elementProps:p,publication:h,isSubscribed:m}=$r({participant:f,name:a,source:l,publication:c},{element:d,props:u});r.useEffect((()=>{null==o||o(!!m)}),[m,o]);return r.createElement("video",lr(cr({ref:d},p),{muted:!0,onClick:e=>{null==i||i(e),null==n||n({participant:f,track:h})}}))}function Ci(e){var t=e,{onSubscriptionStatusChanged:n,volume:i,source:a,name:c,publication:l,participant:s}=t,u=sr(t,["onSubscriptionStatusChanged","volume","source","name","publication","participant"]);const d=r.useRef(null),f=xr(s),{elementProps:p,isSubscribed:h,track:m}=$r({source:a,name:c,participant:f,publication:l},{element:d,props:u});return r.useEffect((()=>{null==n||n(!!h)}),[h,n]),r.useEffect((()=>{void 0!==m&&void 0!==i&&(m instanceof o.rl?m.setVolume(i):sn.warn("volume can only be set on remote audio tracks"))}),[i,m]),r.createElement("audio",cr({ref:d},p))}function Ti(e){const t=!!Er();return e.participant&&!t?r.createElement(kr.Provider,{value:e.participant},e.children):r.createElement(r.Fragment,null,e.children)}function Mi(e){var t,n,i=e,{participant:a,children:c,source:l=o.fQ.Source.Camera,onParticipantClick:s,publication:u,disableSpeakingIndicator:d}=i,f=sr(i,["participant","children","source","onParticipantClick","publication","disableSpeakingIndicator"]);const p=xr(a),h=null!=(t=wr())?t:{participant:p,source:l,publication:u},{elementProps:m}=Vr({participant:h.participant,htmlProps:f,source:h.source,publication:h.publication,disableSpeakingIndicator:d,onParticipantClick:s}),v=br(),g=r.useCallback((e=>{h.source&&!e&&v&&v.pin.dispatch&&function(e,t,n){return void 0!==n&&n.some((({source:n,participant:r})=>n===t&&r.identity===e.identity))}(h.participant,h.source,v.pin.state)&&v.pin.dispatch({msg:"clear_pin"})}),[h.participant,v,h.source]);return r.createElement("div",cr({style:{position:"relative"}},m),r.createElement(Ti,{participant:h.participant},null!=c?c:r.createElement(r.Fragment,null,"video"===(null==(n=h.publication)?void 0:n.kind)||h.source===o.fQ.Source.Camera||h.source===o.fQ.Source.ScreenShare?r.createElement(Si,{participant:h.participant,source:h.source,publication:h.publication,onSubscriptionStatusChanged:g}):r.createElement(Ci,{participant:h.participant,source:h.source,publication:h.publication,onSubscriptionStatusChanged:g}),r.createElement("div",{className:"lk-participant-placeholder"},r.createElement(xi,null)),r.createElement("div",{className:"lk-participant-metadata"},r.createElement("div",{className:"lk-participant-metadata-item"},h.source===o.fQ.Source.Camera?r.createElement(r.Fragment,null,r.createElement(Ei,{source:o.fQ.Source.Microphone,show:"muted"}),r.createElement(ki,null)):r.createElement(r.Fragment,null,r.createElement(di,{style:{marginRight:"0.25rem"}}),r.createElement(ki,null,"'s screen"))),r.createElement(wi,{className:"lk-participant-metadata-item"}))),r.createElement(mi,{trackSource:h.source})))}function Pi(e){const t=Qr(e,{className:"lk-focus-layout"});return r.createElement("div",cr({},t),e.children)}function Ai(e){var t=e,{track:n}=t,i=sr(t,["track"]);return r.createElement(Mi,cr(cr({},n),i))}function Ni(e){var t=e,{tracks:n}=t,i=sr(t,["tracks"]);return r.createElement(r.Fragment,null,n.map((e=>{const t=vn(e)?e.publication.source:e.source;return r.createElement(yr.Provider,{value:e,key:`${e.participant.identity}_${t}`},Fr(i.children))})))}function Li({totalPageCount:e,nextPage:t,prevPage:n,currentPage:i,pagesContainer:o}){const[a,c]=r.useState(!1);return r.useEffect((()=>{let e;return o&&(e=Yn(o.current,2e3).subscribe(c)),()=>{e&&e.unsubscribe()}}),[o]),r.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":a},r.createElement("button",{className:"lk-button",onClick:n},r.createElement(ni,null)),r.createElement("span",{className:"lk-pagination-count"},`${i} of ${e}`),r.createElement("button",{className:"lk-button",onClick:t},r.createElement(ni,null)))}function Ri({totalPageCount:e,currentPage:t}){const n=new Array(e).fill("").map(((e,n)=>n+1===t?r.createElement("span",{"data-lk-active":!0,key:n}):r.createElement("span",{key:n})));return r.createElement("div",{className:"lk-pagination-indicator"},n)}function Oi(e){var t=e,{tracks:n}=t,i=sr(t,["tracks"]);const o=r.createRef(),a=r.useMemo((()=>Qr(i,{className:"lk-grid-layout"})),[i]),{layout:c}=Or(o,n.length),l=function(e,t){const[n,i]=r.useState(1),o=Math.max(Math.ceil(t.length/e),1);n>o&&i(o);const a=n*e,c=a-e,l=e=>{i((t=>"next"===e?t===o?t:t+1:1===t?t:t-1))},s=Ur(t,e);return{totalPageCount:o,nextPage:()=>l("next"),prevPage:()=>l("previous"),setPage:e=>{i(e>o?o:e<1?1:e)},firstItemIndex:c,lastItemIndex:a,tracks:s.slice(c,a),currentPage:n}}(c.maxTiles,n);return function(e,t={}){var n;const i=r.useRef(null),o=r.useRef(null),a=null!=(n=t.minSwipeDistance)?n:50,c=e=>{o.current=null,i.current=e.targetTouches[0].clientX},l=e=>{o.current=e.targetTouches[0].clientX},s=r.useCallback((()=>{if(!i.current||!o.current)return;const e=i.current-o.current,n=e<-a;e>a&&t.onLeftSwipe&&t.onLeftSwipe(),n&&t.onRightSwipe&&t.onRightSwipe()}),[a,t]);r.useEffect((()=>{const t=e.current;return t&&(t.addEventListener("touchstart",c,{passive:!0}),t.addEventListener("touchmove",l,{passive:!0}),t.addEventListener("touchend",s,{passive:!0})),()=>{t&&(t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",l),t.removeEventListener("touchend",s))}}),[e,s])}(o,{onLeftSwipe:l.nextPage,onRightSwipe:l.prevPage}),r.createElement("div",cr({ref:o,"data-lk-pagination":l.totalPageCount>1},a),r.createElement(Ni,{tracks:l.tracks},i.children),n.length>c.maxTiles&&r.createElement(r.Fragment,null,r.createElement(Ri,{totalPageCount:l.totalPageCount,currentPage:l.currentPage}),r.createElement(Li,cr({pagesContainer:o},l))))}function Di(e){var t=e,{tracks:n,orientation:i}=t,o=sr(t,["tracks","orientation"]);const a=r.useRef(null),[c,l]=r.useState(0),{width:s,height:u}=fr(a),d=i||(u>=s?"vertical":"horizontal"),f="vertical"===d?Math.max(.6000000000000001*s,130):Math.max(1.6*u,140),p=function(){const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),document.body.removeChild(t),n-r}(),h="vertical"===d?Math.max((u-p)/f,1):Math.max((s-p)/f,1);let m=Math.round(h);Math.abs(h-c)<.5?m=Math.round(c):c!==h&&l(h);const v=Ur(n,m);return r.useLayoutEffect((()=>{a.current&&(a.current.dataset.lkOrientation=d,a.current.style.setProperty("--lk-max-visible-tiles",m.toString()))}),[m,d]),r.createElement("aside",cr({key:d,className:"lk-carousel",ref:a},o),r.createElement(Ni,{tracks:v},o.children))}function Ii({value:e,onPinChange:t,onWidgetChange:n,children:i}){const o=function(e){const[t,n]=r.useReducer(mr,fn),[i,o]=r.useReducer(hr,pn);return null!=e?e:{pin:{dispatch:n,state:t},widget:{dispatch:o,state:i}}}(e);return r.useEffect((()=>{sn.debug("PinState Updated",{state:o.pin.state}),t&&o.pin.state&&t(o.pin.state)}),[o.pin.state,t]),r.useEffect((()=>{sn.debug("Widget Updated",{widgetState:o.widget.state}),n&&o.widget.state&&n(o.widget.state)}),[n,o.widget.state]),r.createElement(vr.Provider,{value:o},i)}function _i(e){const{room:t,htmlProps:n}=function(e){const t=cr(cr({},_r),e),{token:n,serverUrl:i,options:a,room:c,connectOptions:l,connect:s,audio:u,video:d,screen:f,onConnected:p,onDisconnected:h,onError:m,onMediaDeviceFailure:v,simulateParticipants:g}=t,b=sr(t,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","simulateParticipants"]);a&&c&&sn.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[y,w]=r.useState();r.useEffect((()=>{w(null!=c?c:new o.du(a))}),[JSON.stringify(a),c]);const k=r.useMemo((()=>{const{className:e}={className:"lk-room-container"};return Ar(b,{className:e})}),[b]);return r.useEffect((()=>{if(!y)return;const e=()=>{const e=y.localParticipant;sn.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!u,"boolean"!==typeof u?u:void 0),e.setCameraEnabled(!!d,"boolean"!==typeof d?d:void 0),e.setScreenShareEnabled(!!f,"boolean"!==typeof f?f:void 0)]).catch((e=>{sn.warn(e),null==m||m(e)}))},t=e=>{const t=o.CB.getFailure(e);null==v||v(t)};return y.on(o.TQ.SignalConnected,e),y.on(o.TQ.MediaDevicesError,t),()=>{y.off(o.TQ.SignalConnected,e),y.off(o.TQ.MediaDevicesError,t)}}),[y,u,d,f,m]),r.useEffect((()=>{if(y)if(g)y.simulateParticipants({participants:{count:g},publish:{audio:!0,useRealTracks:!0}});else{if(n)return i?void(s?(sn.debug("connecting"),y.connect(i,n,l).catch((e=>{sn.warn(e),null==m||m(e)}))):(sn.debug("disconnecting because connect is false"),y.disconnect())):(sn.warn("no livekit url provided"),void(null==m||m(Error("no livekit url provided"))));sn.debug("no token yet")}}),[s,n,JSON.stringify(l),y,m,i,g]),r.useEffect((()=>{if(!y)return;const e=e=>{switch(e){case o.em.Disconnected:h&&h();break;case o.em.Connected:p&&p()}};return y.on(o.TQ.ConnectionStateChanged,e),()=>{y.off(o.TQ.ConnectionStateChanged,e)}}),[n,p,h,y]),r.useEffect((()=>{if(y)return()=>{sn.info("disconnecting on onmount"),y.disconnect()}}),[y]),{room:y,htmlProps:k}}(e);return r.createElement("div",cr({},n),t&&r.createElement(Sr.Provider,{value:t},e.children))}function ji(){const e=Yr([o.fQ.Source.Microphone,o.fQ.Source.ScreenShareAudio],{updateOnlyOn:[]}).filter((e=>!rn(e.participant)));return r.createElement("div",{style:{display:"none"}},e.map((e=>r.createElement(Ci,cr({key:e.publication.trackSid},e)))))}function zi(e){const t=r.useMemo((()=>Qr(e,{className:"lk-toast"})),[e]);return r.createElement("div",cr({},t),e.children)}function Qi(e){const[t,n]=r.useState(void 0),i=Nr(e.room);return r.useEffect((()=>{switch(i){case o.em.Reconnecting:n(r.createElement(r.Fragment,null,r.createElement(pi,{className:"lk-spinner"})," Reconnecting"));break;case o.em.Connecting:n(r.createElement(r.Fragment,null,r.createElement(pi,{className:"lk-spinner"})," Connecting"));break;case o.em.Disconnected:n(r.createElement(r.Fragment,null,"Disconnected"));break;default:n(void 0)}}),[i]),t?r.createElement(zi,{className:"lk-toast-connection-state"},t):r.createElement(r.Fragment,null)}function Fi(e){var t,n,i,o,a=e,{entry:c,hideName:l=!1,hideTimestamp:s=!1,messageFormatter:u}=a,d=sr(a,["entry","hideName","hideTimestamp","messageFormatter"]);const f=r.useMemo((()=>u?u(c.message):c.message),[c.message,u]),p=new Date(c.timestamp),h=navigator?navigator.language:"en-US";return r.createElement("li",cr({className:"lk-chat-entry",title:p.toLocaleTimeString(h,{timeStyle:"full"}),"data-lk-message-origin":(null==(t=c.from)?void 0:t.isLocal)?"local":"remote"},d),(!s||!l)&&r.createElement("span",{className:"lk-meta-data"},!l&&r.createElement("strong",{className:"lk-participant-name"},null!=(o=null==(n=c.from)?void 0:n.name)?o:null==(i=c.from)?void 0:i.identity),!s&&r.createElement("span",{className:"lk-timestamp"},p.toLocaleTimeString(h,{timeStyle:"short"}))),r.createElement("span",{className:"lk-message-body"},f))}function $i(e){return function(e,t){const n=Object.entries(t).map((([t,n],r)=>Array.from(e.matchAll(n)).map((({index:e,0:n})=>({type:t,weight:r,content:n,index:null!=e?e:0}))))).flat().sort(((e,t)=>{const n=e.index-t.index;return 0!==n?n:e.weight-t.weight})).filter((({index:e},t,n)=>{if(0===t)return!0;const r=n[t-1];return r.index+r.content.length<=e})),r=[];let i=0;for(const{type:o,content:a,index:c}of n)c>i&&r.push(e.substring(i,c)),r.push({type:o,content:a}),i=c+a.length;return e.length>i&&r.push(e.substring(i)),r}(e,{email:l(),url:an({strict:!1})}).map(((e,t)=>{if("string"===typeof e)return e;{const n=e.content.toString(),i="url"===e.type?/^http(s?):\/\//.test(n)?n:`https://${n}`:`mailto:${n}`;return r.createElement("a",{className:"lk-chat-link",key:t,href:i,target:"_blank",rel:"noreferrer"},n)}}))}function Ui(e){var t=e,{messageFormatter:n}=t,i=sr(t,["messageFormatter"]);const o=r.useRef(null),a=r.useRef(null),{send:c,chatMessages:l,isSending:s}=function(){const e=Cr(),[t,n]=r.useState(),i=pr(null==t?void 0:t.isSendingObservable,!1),o=pr(null==t?void 0:t.messageObservable,[]);return r.useEffect((()=>{const t=Bn(e);return n(t),t.destroy}),[e]),{send:null==t?void 0:t.send,chatMessages:o,isSending:i}}(),u=br(),d=r.useRef(0);return r.useEffect((()=>{var e;a&&(null==(e=a.current)||e.scrollTo({top:a.current.scrollHeight}))}),[a,l]),r.useEffect((()=>{var e,t,n,r,i;if(!u||0===l.length)return;if((null==(e=u.widget.state)?void 0:e.showChat)&&l.length>0&&d.current!==(null==(t=l[l.length-1])?void 0:t.timestamp))return void(d.current=null==(n=l[l.length-1])?void 0:n.timestamp);const o=l.filter((e=>!d.current||e.timestamp>d.current)).length,{widget:a}=u;o>0&&(null==(r=a.state)?void 0:r.unreadMessages)!==o&&(null==(i=a.dispatch)||i.call(a,{msg:"unread_msg",count:o}))}),[l,null==u?void 0:u.widget]),r.createElement("div",lr(cr({},i),{className:"lk-chat"}),r.createElement("ul",{className:"lk-list lk-chat-messages",ref:a},i.children?l.map(((e,t)=>Fr(i.children,{entry:e,key:t,messageFormatter:n}))):l.map(((e,t,i)=>{const o=t>=1&&i[t-1].from===e.from,a=t>=1&&e.timestamp-i[t-1].timestamp<6e4;return r.createElement(Fi,{key:t,hideName:o,hideTimestamp:!1!==o&&a,entry:e,messageFormatter:n})}))),r.createElement("form",{className:"lk-chat-form",onSubmit:function(e){return ur(this,null,(function*(){e.preventDefault(),o.current&&""!==o.current.value.trim()&&c&&(yield c(o.current.value),o.current.value="",o.current.focus())}))}},r.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:s,ref:o,type:"text",placeholder:"Enter a message..."}),r.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:s},"Send")))}function Vi(e){var t=e,{kind:n,initialSelection:i,onActiveDeviceChange:o,tracks:a,requestPermissions:c=!1}=t,l=sr(t,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[s,u]=r.useState(!1),[d,f]=r.useState([]),[p,h]=r.useState(!0),m=(e,t)=>{sn.debug("handle device change"),u(!1),null==o||o(e,t)},v=r.useRef(null),g=r.useRef(null);r.useLayoutEffect((()=>{v.current&&g.current&&(d||p)&&cn(v.current,g.current).then((({x:e,y:t})=>{g.current&&Object.assign(g.current.style,{left:`${e}px`,top:`${t}px`})})),h(!1)}),[v,g,d,p]);const b=r.useCallback((e=>{g.current&&e.target!==v.current&&s&&function(e,t){return!e.contains(t.target)}(g.current,e)&&u(!1)}),[s,g,v]);return r.useEffect((()=>(document.addEventListener("click",b),window.addEventListener("resize",(()=>h(!0))),()=>{document.removeEventListener("click",b),window.removeEventListener("resize",(()=>h(!0)))})),[b,h]),r.createElement(r.Fragment,null,r.createElement("button",lr(cr({className:"lk-button lk-button-menu","aria-pressed":s},l),{onClick:()=>u(!s),ref:v}),l.children),!l.disabled&&r.createElement("div",{className:"lk-device-menu",ref:g,style:{visibility:s?"visible":"hidden"}},n?r.createElement(vi,{initialSelection:i,onActiveDeviceChange:e=>m(n,e),onDeviceListChange:f,kind:n,track:null==a?void 0:a[n],requestPermissions:c}):r.createElement(r.Fragment,null,r.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),r.createElement(vi,{kind:"audioinput",onActiveDeviceChange:e=>m("audioinput",e),onDeviceListChange:f,track:null==a?void 0:a.audioinput,requestPermissions:c}),r.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),r.createElement(vi,{kind:"videoinput",onActiveDeviceChange:e=>m("videoinput",e),onDeviceListChange:f,track:null==a?void 0:a.videoinput,requestPermissions:c}))))}var Wi={username:"",videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default"};function Zi(e){var t,n,i,a,c,l=e,{defaults:s={},onValidate:u,onSubmit:d,onError:f,debug:p,joinLabel:h="Join Room",micLabel:m="Microphone",camLabel:v="Camera",userLabel:g="Username"}=l,b=sr(l,["defaults","onValidate","onSubmit","onError","debug","joinLabel","micLabel","camLabel","userLabel"]);const[y,w]=r.useState(Wi),[k,E]=r.useState(null!=(t=s.username)?t:Wi.username),[x,S]=r.useState(null!=(n=s.videoEnabled)?n:Wi.videoEnabled),C=null!=(i=s.videoDeviceId)?i:Wi.videoDeviceId,[T,M]=r.useState(C),P=null!=(a=s.audioDeviceId)?a:Wi.audioDeviceId,[A,N]=r.useState(null!=(c=s.audioEnabled)?c:Wi.audioEnabled),[L,R]=r.useState(P),O=function(e,t){const[n,i]=r.useState();return r.useEffect((()=>{let n,r=!1;return(e.audio||e.video)&&(n=(0,o.Ai)(e),n.then((e=>{r?e.forEach((e=>e.stop())):i(e)})).catch(t)),()=>{r=!0,null==n||n.then((e=>e.forEach((e=>{e.stop()}))))}}),[JSON.stringify(e)]),n}({audio:!!A&&{deviceId:P},video:!!x&&{deviceId:C}},f),D=r.useRef(null),I=r.useMemo((()=>null==O?void 0:O.filter((e=>e.kind===o.fQ.Kind.Video))[0]),[O]),_=r.useMemo((()=>{if(I){const{facingMode:e}=(0,o.ul)(I);return e}return"undefined"}),[I]),j=r.useMemo((()=>null==O?void 0:O.filter((e=>e.kind===o.fQ.Kind.Audio))[0]),[O]);r.useEffect((()=>(D.current&&I&&(I.unmute(),I.attach(D.current)),()=>{null==I||I.detach()})),[I]);const[z,Q]=r.useState(),F=r.useCallback((e=>"function"===typeof u?u(e):""!==e.username),[u]);return r.useEffect((()=>{const e={username:k,videoEnabled:x,videoDeviceId:T,audioEnabled:A,audioDeviceId:L};w(e),Q(F(e))}),[k,x,F,A,L,T]),r.createElement("div",cr({className:"lk-prejoin"},b),r.createElement("div",{className:"lk-video-container"},I&&r.createElement("video",{ref:D,width:"1280",height:"720","data-lk-facing-mode":_}),(!I||!x)&&r.createElement("div",{className:"lk-camera-off-note"},r.createElement(xi,null))),r.createElement("div",{className:"lk-button-group-container"},r.createElement("div",{className:"lk-button-group audio"},r.createElement(yi,{initialState:A,source:o.fQ.Source.Microphone,onChange:e=>N(e)},m),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(Vi,{initialSelection:L,kind:"audioinput",disabled:!j,tracks:{audioinput:j},onActiveDeviceChange:(e,t)=>R(t)}))),r.createElement("div",{className:"lk-button-group video"},r.createElement(yi,{initialState:x,source:o.fQ.Source.Camera,onChange:e=>S(e)},v),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(Vi,{initialSelection:T,kind:"videoinput",disabled:!I,tracks:{videoinput:I},onActiveDeviceChange:(e,t)=>M(t)})))),r.createElement("form",{className:"lk-username-container"},r.createElement("input",{className:"lk-form-control",id:"username",name:"username",type:"text",defaultValue:k,placeholder:g,onChange:e=>E(e.target.value),autoComplete:"off"}),r.createElement("button",{className:"lk-button lk-join-button",type:"submit",onClick:function(e){e.preventDefault(),F(y)?"function"===typeof d&&d(y):sn.warn("Validation failed with: ",y)},disabled:!z},h)),p&&r.createElement(r.Fragment,null,r.createElement("strong",null,"User Choices:"),r.createElement("ul",{className:"lk-list",style:{overflow:"hidden",maxWidth:"15rem"}},r.createElement("li",null,"Username: ",`${y.username}`),r.createElement("li",null,"Video Enabled: ",`${y.videoEnabled}`),r.createElement("li",null,"Audio Enabled: ",`${y.audioEnabled}`),r.createElement("li",null,"Video Device: ",`${y.videoDeviceId}`),r.createElement("li",null,"Audio Device: ",`${y.audioDeviceId}`))))}function Hi(e){var t,n=e,{variation:i,controls:a}=n,c=sr(n,["variation","controls"]);const[l,s]=r.useState(!1),u=br();r.useEffect((()=>{var e,t;void 0!==(null==(e=null==u?void 0:u.widget.state)?void 0:e.showChat)&&s(null==(t=null==u?void 0:u.widget.state)?void 0:t.showChat)}),[null==(t=null==u?void 0:u.widget.state)?void 0:t.showChat]);const d=function(e){const t=e=>"undefined"!==typeof window&&window.matchMedia(e).matches,[n,i]=r.useState(t(e));function o(){i(t(e))}return r.useEffect((()=>{const t=window.matchMedia(e);return o(),t.addListener?t.addListener(o):t.addEventListener("change",o),()=>{t.removeListener?t.removeListener(o):t.removeEventListener("change",o)}}),[e]),n}(`(max-width: ${l?1e3:760}px)`);null!=i||(i=d?"minimal":"verbose");const f=cr({leave:!0},a),p=jr();p?(null!=f.camera||(f.camera=p.canPublish),null!=f.microphone||(f.microphone=p.canPublish),null!=f.screenShare||(f.screenShare=p.canPublish),null!=f.chat||(f.chat=p.canPublishData&&(null==a?void 0:a.chat))):(f.camera=!1,f.chat=!1,f.microphone=!1,f.screenShare=!1);const h=r.useMemo((()=>"minimal"===i||"verbose"===i),[i]),m=r.useMemo((()=>"textOnly"===i||"verbose"===i),[i]),v="undefined"!==typeof navigator&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia,[g,b]=r.useState(!1),y=Qr({className:"lk-control-bar"},c);return r.createElement("div",cr({},y),f.microphone&&r.createElement("div",{className:"lk-button-group"},r.createElement(yi,{source:o.fQ.Source.Microphone,showIcon:h},m&&"Microphone"),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(Vi,{kind:"audioinput"}))),f.camera&&r.createElement("div",{className:"lk-button-group"},r.createElement(yi,{source:o.fQ.Source.Camera,showIcon:h},m&&"Camera"),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(Vi,{kind:"videoinput"}))),f.screenShare&&v&&r.createElement(yi,{source:o.fQ.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:h,onChange:e=>{b(e)}},m&&(g?"Stop screen share":"Share screen")),f.chat&&r.createElement(Gr,null,h&&r.createElement(ti,null),m&&"Chat"),f.leave&&r.createElement(Xr,null,h&&r.createElement(ii,null),m&&"Leave"),r.createElement(gi,{label:"Start Audio"}))}function qi(e){var t,n,i=e,{chatMessageFormatter:a}=i,c=sr(i,["chatMessageFormatter"]);const[l,s]=r.useState({showChat:!1,unreadMessages:0}),u=r.useRef(null),d=Yr([{source:o.fQ.Source.Camera,withPlaceholder:!0},{source:o.fQ.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[o.TQ.ActiveSpeakersChanged]}),f=function(){const[e,t]=r.useReducer(mr,fn),[n,i]=r.useReducer(hr,pn);return{pin:{dispatch:t,state:e},widget:{dispatch:i,state:n}}}(),p=d.filter(vn).filter((e=>e.publication.source===o.fQ.Source.ScreenShare)),h=null==(t=Wr(f))?void 0:t[0],m=d.filter((e=>!function(e,t){return vn(e)&&vn(t)?e.publication.trackSid===t.publication.trackSid:!(!gn(e)||!gn(t))&&e.participant.identity===t.participant.identity&&e.source===t.source}(e,h)));return r.useEffect((()=>{var e,t,n,r;p.length>0&&null===u.current?(sn.debug("Auto set screen share focus:",{newScreenShareTrack:p[0]}),null==(t=(e=f.pin).dispatch)||t.call(e,{msg:"set_pin",trackReference:p[0]}),u.current=p[0]):u.current&&!p.some((e=>{var t,n;return e.publication.trackSid===(null==(n=null==(t=u.current)?void 0:t.publication)?void 0:n.trackSid)}))&&(sn.debug("Auto clearing screen share focus."),null==(r=(n=f.pin).dispatch)||r.call(n,{msg:"clear_pin"}),u.current=null)}),[p.map((e=>e.publication.trackSid)).join(),null==(n=null==h?void 0:h.publication)?void 0:n.trackSid]),r.createElement("div",cr({className:"lk-video-conference"},c),on()&&r.createElement(Ii,{value:f,onWidgetChange:e=>{sn.debug("updating widget state",e),s(e)}},r.createElement("div",{className:"lk-video-conference-inner"},h?r.createElement("div",{className:"lk-focus-layout-wrapper"},r.createElement(Pi,null,r.createElement(Di,{tracks:m},r.createElement(Mi,null)),h&&r.createElement(Ai,{track:h}))):r.createElement("div",{className:"lk-grid-layout-wrapper"},r.createElement(Oi,{tracks:d},r.createElement(Mi,null))),r.createElement(Hi,{controls:{chat:!0}})),r.createElement(Ui,{style:{display:l.showChat?"flex":"none"},messageFormatter:a})),r.createElement(ji,null),r.createElement(Qi,null))}},6620:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:function(){return i}})}}]);
//# sourceMappingURL=257-bc9149c0fa9fa62f.js.map
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[640],{9685:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms/[name]",function(){return i(7625)}])},3972:function(e,n,i){"use strict";i.d(n,{a:function(){return u}});var r=i(6620),s=i(5893),t=i(7294),o=i(5271),d=i(9594),c=i(9479),a=i(6399),l=i.n(a),u=function(e){var n=e.logLevel,i=(0,o.fZ)(),a=(0,r.Z)(t.useState(!1),2),u=a[0],v=a[1],x=(0,r.Z)(t.useState({}),2)[1];if(function(e){var n=e.logLevel;(0,d.Ub)(null!==n&&void 0!==n?n:"debug");var i=(0,o.fZ)();t.useEffect((function(){return window.__lk_room=i,function(){window.__lk_room=void 0}}),[])}({logLevel:n}),t.useEffect((function(){if(window){var e=(0,c.Fj)(window,{"Shift+D":function(){console.log("setting open"),v((function(e){return!e}))}}),n=setInterval((function(){x({})}),1e3);return function(){e(),clearInterval(n)}}}),[u]),!u)return null;var j=i.localParticipant;return u?(0,s.jsxs)("div",{className:l().overlay,children:[(0,s.jsx)("section",{id:"room-info",children:(0,s.jsxs)("h3",{children:["Room Info ",i.name,": ",i.sid]})}),(0,s.jsxs)("details",{open:!0,children:[(0,s.jsx)("summary",{children:(0,s.jsxs)("b",{children:["Local Participant: ",j.identity]})}),(0,s.jsxs)("details",{open:!0,className:l().detailsSection,children:[(0,s.jsx)("summary",{children:(0,s.jsx)("b",{children:"Published tracks"})}),(0,s.jsx)("div",{children:Array.from(j.tracks.values()).map((function(e){var n,i,r,t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsxs)("i",{children:[e.source.toString(),"\xa0",(0,s.jsx)("span",{children:e.trackSid})]})}),(0,s.jsx)("table",{children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Kind"}),(0,s.jsxs)("td",{children:[e.kind,"\xa0","video"===e.kind&&(0,s.jsxs)("span",{children:[null===(n=e.track)||void 0===n||null===(i=n.dimensions)||void 0===i?void 0:i.width,"x",null===(r=e.track)||void 0===r||null===(t=r.dimensions)||void 0===t?void 0:t.height]})]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Bitrate"}),(0,s.jsxs)("td",{children:[Math.ceil(e.track.currentBitrate/1e3)," kbps"]})]})]})})]})}))})]}),(0,s.jsxs)("details",{open:!0,className:l().detailsSection,children:[(0,s.jsx)("summary",{children:(0,s.jsx)("b",{children:"Permissions"})}),(0,s.jsx)("div",{children:(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:j.permissions&&Object.entries(j.permissions).map((function(e){var n=(0,r.Z)(e,2),i=n[0],t=n[1];return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:i}),"canPublishSources"!==i?(0,s.jsx)("td",{children:t.toString()}):(0,s.jsxs)("td",{children:[" ",t.join(", ")," "]})]})})}))})})})]})]}),(0,s.jsxs)("details",{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("b",{children:"Remote Participants"})}),Array.from(i.participants.values()).map((function(e){return(0,s.jsxs)("details",{className:l().detailsSection,children:[(0,s.jsx)("summary",{children:(0,s.jsxs)("b",{children:[e.identity,(0,s.jsx)("span",{})]})}),(0,s.jsx)("div",{children:Array.from(e.tracks.values()).map((function(e){var n,i;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsxs)("i",{children:[e.source.toString(),"\xa0",(0,s.jsx)("span",{children:e.trackSid})]})}),(0,s.jsx)("table",{children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Kind"}),(0,s.jsxs)("td",{children:[e.kind,"\xa0","video"===e.kind&&(0,s.jsxs)("span",{children:[null===(n=e.dimensions)||void 0===n?void 0:n.width,"x",null===(i=e.dimensions)||void 0===i?void 0:i.height]})]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Status"}),(0,s.jsx)("td",{children:h(e)})]}),e.track&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Bitrate"}),(0,s.jsxs)("td",{children:[Math.ceil(e.track.currentBitrate/1e3)," kbps"]})]})]})})]})}))})]},e.sid)}))]})]}):(0,s.jsx)(s.Fragment,{})};function h(e){return e.isSubscribed?e.isEnabled?"enabled":"disabled":"unsubscribed"}},7625:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return x}});var r=i(5893),s=i(5271),t=i(9594),o=i(9008),d=i.n(o),c=i(1163),a=i(7294),l=i(3972);function u(e,n,i,r,s,t,o){try{var d=e[t](o),c=d.value}catch(a){return void i(a)}d.done?n(c):Promise.resolve(c).then(r,s)}var h=i(414);function v(e){var n=(0,a.useState)(),i=n[0],r=n[1];return(0,a.useEffect)((function(){var n="/api/url";e&&(n+="?region=".concat(e)),fetch(n).then(function(){var e,n=(e=function(e){var n;return(0,h.__generator)(this,(function(i){switch(i.label){case 0:return e.ok?[4,e.json()]:[3,2];case 1:return n=i.sent(),console.log(n),r(n.url),[3,3];case 2:throw Error("Error fetching server url, check server logs");case 3:return[2]}}))},function(){var n=this,i=arguments;return new Promise((function(r,s){var t=e.apply(n,i);function o(e){u(t,r,s,o,d,"next",e)}function d(e){u(t,r,s,o,d,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}())})),i}var x=function(){var e=(0,c.useRouter)(),n=e.query.name,i=(0,a.useState)(void 0),t=i[0],o=i[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d(),{children:[(0,r.jsx)("title",{children:"LiveKit Meet"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("main",{"data-lk-theme":"default",children:n&&!Array.isArray(n)&&t?(0,r.jsx)(j,{roomName:n,userChoices:t,onLeave:function(){e.push("/")}}):(0,r.jsx)("div",{style:{display:"grid",placeItems:"center",height:"100%"},children:(0,r.jsx)(s.tt,{onError:function(e){return console.log("error while setting up prejoin",e)},defaults:{username:"",videoEnabled:!0,audioEnabled:!0},onSubmit:function(e){console.log("Joining with: ",e),o(e)}})})})]})},j=function(e){var n=e.roomName,i=e.userChoices,o=e.onLeave,d=(0,s.dQ)("/api/token",n,{userInfo:{identity:i.username,name:i.username}}),u=(0,c.useRouter)().query,h=u.region,x=u.hq,j=v(h),f=(0,a.useMemo)((function(){var e,n;return{videoCaptureDefaults:{deviceId:null!==(e=i.videoDeviceId)&&void 0!==e?e:void 0,resolution:"true"===x?t.OM.h2160:t.OM.h720},publishDefaults:{videoSimulcastLayers:"true"===x?[t.OM.h1080,t.OM.h720]:[t.OM.h540,t.OM.h216]},audioCaptureDefaults:{deviceId:null!==(n=i.audioDeviceId)&&void 0!==n?n:void 0},adaptiveStream:{pixelDensity:"screen"},dynacast:!0}}),[i,x]);return(0,r.jsx)(r.Fragment,{children:j&&(0,r.jsxs)(s.IC,{token:d,serverUrl:j,options:f,video:i.videoEnabled,audio:i.audioEnabled,onDisconnected:o,children:[(0,r.jsx)(s.zc,{chatMessageFormatter:s.x3}),(0,r.jsx)(l.a,{logLevel:t.in.info})]})})}},6399:function(e){e.exports={overlay:"Debug_overlay__6m2KJ",detailsSection:"Debug_detailsSection__L267_"}}},function(e){e.O(0,[970,257,774,888,179],(function(){return n=9685,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=[name]-81f19e174bce799f.js.map